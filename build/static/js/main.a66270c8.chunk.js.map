{"version":3,"sources":["db.js","dbL.js","components/t.js","pages/race.js","components/event.js","components/effect.js","components/support-detail.js","components/skill-detail.js","components/race.js","components/player-detail.js","pages/player.js","pages/support.js","components/buff.js","components/deck.js","pages/nurturing2.js","pages/skill.js","pages/seed.js","components/lan-button.js","components/intro.js","app-pc.js","pages-mo/nurturing.js","pages-mo/seed.js","app-mo.js","index.js"],"names":["adapterM","Memory","db","low","set","jsonDB","players","write","supports","skills","events","updateTime","races","buffs","effects","adapterL","LocalStorage","d","a","axios","get","res","console","log","data","value","0","1","2","3","4","5","player","adapter","lan","lanData","ZH","EN","JP","t","text","filterList","class","grade","place","ground","distanceType","direction","side","labels","labelTextDict","name","date","distance","getCorrespondingLabelText","label","mediumLabels","getColumns","map","title","dataIndex","filters","onFilter","record","Race","props","dynamicTableHeight","React","useState","window","innerHeight","height","setHeight","useEffect","handleWindowResize","addEventListener","removeEventListener","useViewport","allRaceList","race","index","key","selectedRowKeys","setSelectedRowKeys","columns","type","rowSelection","onChange","selectedRows","selected","dateNum","push","id","onSelect","dataSource","pagination","sorter","extra","scroll","y","ua","dbL","EventList","eventList","find","qieZhe","filter","event","JSON","stringify","indexOf","choiceList","length","justify","align","defaultActiveKey","TabPane","tab","EventBox","ChoiceItem","choice","ResultItem","result","gutter","className","span","mouseEnterDelay","trigger","content","placement","limits","getValue","effect","cur","min","min_limit","max","max_limit","slice","limit","Math","floor","EffectTable","render","description","rarity","rowKey","getEffectMark","maxLevel","ok","10","15","20","25","30","35","40","TestEffectTable","effectCapsuleStyle","display","alignItems","flexDirection","margin","borderRadius","backgroundColor","borderStyle","borderWidth","borderColor","effectRightDivStyle","padding","width","effectNameStyle","fontSize","fontWeight","color","textShadow","overflow","whiteSpace","textOverflow","effectValueStyle","effectBoxStyle","justifyContent","state","selectingLevel","input","nodes","output","this","prevNode","level","i","upperNode","lowerNode","unique_effect","style","marginRight","lv","setState","marks","item","init","limit_lv5","limit_lv10","limit_lv15","limit_lv20","limit_lv25","limit_lv30","limit_lv35","limit_lv40","limit_lv45","limit_lv50","calc","Component","cdnServer","SupportDetail","supportId","match","params","src","imgUrl","preview","charaName","pid","skillList","trainingEventSkill","possessionSkill","message","SupportCard","history","useHistory","isModalVisible","setIsModalVisible","support","onClick","alt","visible","onOk","onCancel","destroyOnClose","Search","allSkillList","orderBy","options","distance_type","running_style","phase","corner_random","straight_random","is_finalcorner","skillType","6","7","8","9","14","21","27","28","31","SkillList","skillId","usedInList","isNur","allSupportList","allPlayerList","SkillDetail","skill","undefined","parseInt","nur","supportList","flag","forEach","playerList","maxWidth","maxHeight","textAlign","overflowWrap","wordBreak","describe","condition","ability","ability_time","cooldown","need_skill_point","grade_value","sort","b","SkillButton","position","top","left","SkillCheckboxGroup","memo","Group","checkedValues","SkillCheckbox","skillChecked1","setSkillChecked1","skillChecked2","setSkillChecked2","checkboxGroupValues","setCheckedboxGroupValues","localStorage","getItem","setItem","isOwn","setIsOwn","mySupports","mySkillList","Set","reduce","list","concat","checkOptions1","checkOptions2","onChange1","updateSkillList","filteredSkills","onChange2","useMemo","Object","entries","l","values","_key","flat","some","phrase","includes","onCheckboxGroupsChange","useCallback","groupName","tempSkillList","check2","check3","check1","str","icon_id","rare","has","needId","onUpdate","checkOnly","gourpName","checkItem","flex","lineHeight","checked","curValue","placeholder","enterButton","size","onSearch","searchText","raceGolds","raceNames","getGolds","golds","raceGold","uniqueName","join","RaceTimeline","showSpare","setShowSpare","getDate","year","month","moment","getColor","curRace","raceList","Item","goal","filterRace","mode","paddingTop","RaceCheckbox","raceFilterCondition","setRaceFilterCondition","keys","defaultValue","tmpObj","PlayerDetail","playerId","PlayerItem","resizemode","hideEvent","coloredGradeText","AdaptBox","cellStyle","paddingLeft","headerCellStyle","adaptTextWrapperStyle","paddingRight","cellPadding","grass","dirt","shortDistance","mile","mediumDistance","longDistance","escape","leading","insert","tracking","GrowBox","speedGrow","staminaGrow","powerGrow","gutsGrow","wisdomGrow","PlayerCard","showName","showPlayerDetail","cover","Meta","footer","PlayerTable","adaptFilters","growFilters","rares","titles","getColumn","Player","isTable","prevProps","xxl","lg","sm","xs","defaultProps","CheckboxGroup","Support","changeChooseMode","chooseMode","showMode","changeShowMode","chosenList","splice","update","onSupportCheckboxChange","effectList","updateSupport","onSkillCheckboxUpdate","onTypeListChange","typeList","eventIdList","tempList","eventId","effectOptions","typeOptions","headerStyle","headerTextStyle","overflowY","overflowX","BuffButton","BuffList","buff","MyDecks","decks","setDecks","saveDeck","deck","tmpDeck","imgUrls","supportsId","tags","assign","shortid","generate","shareDeck","formData","localeCompare","post","info","msg","overlayStyle","onChangeTag","loadDeck","onConfirm","danger","remove","deleteDeck","RecommendDecks","recommendDecks","setRecommendDecks","setPlayerId","searchDeck","onVisibleChange","tag","Nurturing","needSelect","setNeedSelect","isPlayerVisible","setIsPlayerVisible","isSupportVisible","setIsSupportVisible","supportIndex","setSupportIndex","setSupports","setPlayer","setFilterRace","showPlayer","closePlayer","showSupport","closeSupport","innerWidth","setWidth","dynamicContentHeight","dynamicCardHeight","dynamicRowHeight","layoutWithBlank","x","w","h","layoutWithoutBlank","originalLayout","layout","setLayout","panelStyle","headStyle","cursor","pBodyStyle","cols","draggableCancel","draggableHandle","rowHeight","onLayoutChange","filterCondition","tmpRaceList","f","tmpFilterRace","autoHide","background","newData","Skill","setSkillList","rareLabel","dynamicListHeight","userId","blueLabels","speed","stamina","power","guts","wisdom","redLabels","escapeR","leadingR","insertR","trackingR","PlayerInput","setData","triggerChange","changedValue","fallback","SupportInput","SeedInput","useForm","form","seed","setSeed","onFinish","tmpSeed","Date","getTime","success","children","offset","rules","required","Button","count","initialValue","dots","tooltipPlacement","getFields","getFieldValue","validator","_","Promise","resolve","reject","Error","htmlType","SearchOne","List","fields","add","errors","field","md","fieldKey","validateTrigger","noStyle","icon","PlusOutlined","ErrorList","SearchForm","attrs","levels","p0","attr","p1","search","resetFields","PlayerImage","SupportImage","Seed","isSeedInputVisible","setIsSeedInputVisible","seedList","setSeedList","total","setTotal","setCurrent","setValue","onCopy","shape","CopyOutlined","SmileOutlined","like","likes","FrownOutlined","dislike","dislikes","DeleteOutlined","deleteSeed","disabled","closeSeedInput","e","current","pageSize","simple","showQuickJumper","withRouter","code","setCode","flagStyle","location","reload","introV","stepsEnabled","setStepsEnabled","steps","element","intro","href","enabled","initialStep","onExit","onBeforeChange","nextStepIndex","onComplete","doneLabel","Header","Content","Footer","AppPc","document","getElementsByTagName","zIndex","theme","to","float","exact","path","component","Nurturing2","frameBorder","scrolling","target","rel","border","flexWrap","EditOutlined","lists","minWidth","cascade","arrow","SeedCard","gameId","wrap","App1","open","onOpenChange","linkList","marginTop","onLeftClick","minHeight","documentElement","clientHeight","WebkitOverflowScrolling","enableDragHandle","contentStyle","sidebar","NurturingMO2","SeedMo","ie_upto10","test","navigator","userAgent","ie_11up","exec","ie_edge","mac","platform","ie","ie_version","documentMode","gecko","gecko_version","chrome","chrome_version","safari","vendor","ios","maxTouchPoints","android","webkit","webkit_version","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.a66270c8.chunk.js","sourcesContent":["import low from 'lowdb';\r\nimport LocalStorage from 'lowdb/adapters/LocalStorage'\r\nimport Memory from 'lowdb/adapters/Memory'\r\nimport axios from 'axios'\r\nimport jsonDB from './assert/db.json'\r\n\r\n// const adapter = new LocalStorage('db')\r\nconst adapterM = new Memory()\r\nconst db = low(adapterM)\r\n\r\n\r\n// const d = async ()=>{\r\n//   // let res = await axios.get('https://urarawin.com/d')\r\n//   let res = await axios.get('https://urarawin.com/api/sqlite/d')\r\n//   console.log(res.data)\r\n//   db.set('userId',res.data).write()\r\n// }\r\n// db.get('userId').value()||d()\r\n\r\ndb.set('players',jsonDB.players).write()\r\ndb.set('supports',jsonDB.supports).write()\r\ndb.set('skills',jsonDB.skills).write()\r\ndb.set('events',jsonDB.events).write()\r\ndb.set('updateTime',jsonDB.updateTime).write()\r\ndb.set('races',jsonDB.races).write()\r\ndb.set('buffs',jsonDB.buffs).write()\r\ndb.set('effects',jsonDB.effects).write()\r\n\r\n// db.get('lan').value()==='zh'&&db.set('lan','cn').write()\r\n// db.get('lan').value()==='en'&&db.set('lan','us').write()\r\n//重新加载\r\n\r\n// db.get('lan').value()||db.set('lan','cn').write()\r\n// db.get('selected').value()||db.set('selected',{\r\n//   supports:{0:{},1:{},2:{},3:{},4:{},5:{}},\r\n//   player:{},\r\n//   races:[]\r\n// }).write()\r\n// db.get('myDecks').value()||db.set('myDecks',[]).write()\r\n// db.get('mySupports').value()||db.set('mySupports',[]).write()\r\nexport  default db\r\n","import low from 'lowdb';\r\nimport LocalStorage from 'lowdb/adapters/LocalStorage'\r\nimport Memory from 'lowdb/adapters/Memory'\r\nimport axios from 'axios'\r\nimport jsonDB from './assert/db.json'\r\n\r\nconst adapterL = new LocalStorage('db')\r\n// const adapterM = new Memory()\r\nconst db = low(adapterL)\r\n\r\n\r\nconst d = async ()=>{\r\n  // let res = await axios.get('https://urarawin.com/d')\r\n  let res = await axios.get('https://urarawin.com/api/sqlite/d')\r\n  console.log(res.data)\r\n  db.set('userId',res.data).write()\r\n}\r\ndb.get('userId').value()||d()\r\ndb.get('lan').value()||db.set('lan','cn').write()\r\ndb.get('selected').value()||db.set('selected',{\r\n  supports:{0:{},1:{},2:{},3:{},4:{},5:{}},\r\n  player:{},\r\n  races:[]\r\n}).write()\r\ndb.get('myDecks').value()||db.set('myDecks',[]).write()\r\ndb.get('mySupports').value()||db.set('mySupports',[]).write()\r\nexport  default db\r\n","import low from 'lowdb';\nimport LocalStorage from 'lowdb/adapters/LocalStorage'\n\nimport ZH from '../assert/cn.json'\nimport EN from '../assert/us.json'\nimport JP from '../assert/jp.json'\nconst adapter = new LocalStorage('db')\nconst db = low(adapter)\n\nconst lan = db.get('lan').value()||'cn'\nlet lanData = {}\nif(lan==='cn'){\n  lanData = ZH\n}else if(lan==='us'){\n  lanData = EN\n}else if(lan==='jp'){\n  lanData = JP\n}\nlet noTrans = {}\nconst t = (text,lan)=>{\n  if(lan==='cn'){\n    lanData = ZH\n  }else if(lan==='us'){\n    lanData = EN\n  }else if(lan==='jp'){\n    lanData = JP\n  }\n  let result = lanData[text]\n\n  // if(!result&&result!==\"\"){\n  //   noTrans[text]=\"\"\n  // }\n  // console.log(JSON.stringify(noTrans))\n\n  return result||text\n}\nexport  default t\n","import React,{useState} from 'react';\nimport db from '../db.js'\nimport t from '../components/t.js'\nimport { Table } from 'antd';\n\n // { name: '葵ステークス',\n  //   date: '2年目 5月後半',\n  //   dateNum: 34,\n  //   class: 'クラシック',\n  //   grade: 'G3',\n  //   place: '京都',\n  //   ground: '芝',\n\n  //   distance: '1400',\n  //   distanceType: '短距離',\n  //   order: '右' }\n  // { class: [ 'ジュニア', 'クラシック', 'クラシックシニア', 'シニア' ],\n  // grade: [ 'OP', 'G3', 'Pre-OP', 'G2', 'G1' ],\n  // place: [ '中京', '函館', '札幌', '小倉', '新潟', '阪神', '中山', '京都', '東京', '福島', '大井' ],\n  // ground: [ '芝', 'ダート' ],\n  // distanceType: [ 'マイル', '短距離', '中距離', '長距離' ],\n  // direction: [ '左', '右', '直' ],\n  // side: [ null, '内', '外', '線' ] }\n const filterList= { class:\n    [ { text: '初等/ジュニア', value: 'ジュニア' },\n      { text: '经典/クラシック', value: 'クラシック' },\n      { text: '经典&高级/クラシックシニア', value: 'クラシックシニア' },\n      { text: '高级/シニア', value: 'シニア' } ],\n   grade:\n   [\n      { text: 'Pre-OP', value: 'Pre-OP' },\n      { text: 'OP', value: 'OP' },\n      { text: 'G1', value: 'G1' },\n      { text: 'G2', value: 'G2' },\n      { text: 'G3', value: 'G3' }\n    ],\n   place:\n    [ { text: '中京', value: '中京' },\n      { text: '函館', value: '函館' },\n      { text: '札幌', value: '札幌' },\n      { text: '小倉', value: '小倉' },\n      { text: '新潟', value: '新潟' },\n      { text: '阪神', value: '阪神' },\n      { text: '中山', value: '中山' },\n      { text: '京都', value: '京都' },\n      { text: '東京', value: '東京' },\n      { text: '福島', value: '福島' },\n      { text: '大井', value: '大井' } ],\n   ground: [ { text: '芝', value: '芝' }, { text: 'ダート', value: 'ダート' } ],\n   distanceType:\n   [\n     { text: '短距離', value: '短距離' },\n     { text: 'マイル', value: 'マイル' },\n      { text: '中距離', value: '中距離' },\n      { text: '長距離', value: '長距離' } ],\n   direction:\n    [ { text: '左', value: '左' },\n      { text: '右', value: '右' },\n      { text: '直', value: '直' } ],\n   side:\n    [ { text: '空', value: null },\n      { text: '内', value: '内' },\n      { text: '外', value: '外' },\n      { text: '線', value: '線' } ] }\n  const labels = [\"name\", \"date\", \"class\", \"grade\",\n                  \"place\", \"ground\", \"distance\",\n                  \"distanceType\", \"direction\", \"side\"]\n  const labelTextDict ={name:t(\"名称\"),date:t(\"时间\"),class:t(\"年级\"),grade:t(\"赛事等级\"),place:t(\"地点\"),ground:t(\"场地\"),distance:t(\"长度\"),distanceType:t(\"赛程\"),direction:t(\"方向\"),side:t(\"赛道\")}\n  const getCorrespondingLabelText = (label)=>{\n      return labelTextDict[label]\n  }\n  const mediumLabels = [\"name\", \"date\", \"class\",\"grade\",\"ground\",\"distanceType\"]\n  const getColumns = (labels)=>{\n    return labels.map(label=> {\n      if(filterList['class']){\n        return {\n          title:getCorrespondingLabelText(label),\n          dataIndex:label,\n          filters:filterList[label],\n          onFilter: (value, record) => record[label] === value,\n        }\n      }else{\n        return{\n          title:getCorrespondingLabelText(label),\n          dataIndex:label\n        }\n      }\n    })\n  }\n\n\n\n  const Race = (props) =>{\n    const useViewport = () => {\n      // const [width, setWidth] = React.useState(window.innerWidth);\n      const [height,setHeight] = React.useState(window.innerHeight);\n      React.useEffect(() => {\n        const handleWindowResize = () => setHeight(window.innerHeight);\n        window.addEventListener(\"resize\", handleWindowResize);\n        return () => window.removeEventListener(\"resize\", handleWindowResize);\n      }, []);\n      console.log('currentWidth::',height);\n      return {height};\n    };\n\n    const dynamicTableHeight = useViewport().height -300;\n\n    const allRaceList = db.get('races').value().map((race,index)=>{\n                      race.key=index\n                      return race\n                    })\n    const [selectedRowKeys,setSelectedRowKeys] = useState([])\n    let columns = getColumns(labels)\n    if(props.type==='medium'){\n      columns = getColumns(mediumLabels)\n    }\n    const onSelectChange = (selectedRowKeys,selectedRows)=>{\n      let selected = {}\n      for(let race of selectedRows){\n        if(selected[race.dateNum]){\n          selected[race.dateNum].push(race.id)\n        }else{\n          selected[race.dateNum]=[race.id]\n        }\n      }\n      console.log(selected)\n      props.onSelect(selected)\n      setSelectedRowKeys(selectedRowKeys)\n    }\n    const rowSelection = {\n      selectedRowKeys,\n      onChange:onSelectChange\n    }\n    // 筛选发生变化时清空已经选择的内容\n    const onChange = (pagination, filters, sorter, extra) => {\n      props.onSelect([])\n      setSelectedRowKeys([])\n    }\n    return(\n      <div>\n      <Table rowSelection={props.onSelect?rowSelection:null} columns={columns}\n      dataSource={allRaceList} onChange={onChange} pagination={false} scroll={{y:dynamicTableHeight}}/>\n      </div>\n      )\n  }\n\nexport default Race\n","import React from 'react';\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from './t.js'\r\nimport {Row,Col,Popover,Button,Tabs } from 'antd';\r\n\r\n\r\nconst ua = dbL.get('ua').value();\r\n\r\nconst EventList = (props)=>{\r\n  const eventIdList = props.eventList\r\n  const eventList = eventIdList.map(id=>db.get('events').find({id:id}).value())\r\n  const qieZhe = eventList?.filter(event=>JSON.stringify(event).indexOf('切れ者')!==-1)\r\n  if(props.type==='multi'){\r\n    return(<>\r\n        {eventList.filter(event=>event.choiceList.length > 1).map(event=><EventBox key={event.id} event={event}></EventBox>)}\r\n      </>\r\n    )\r\n  }else if(props.type==='all'){\r\n    return(<>\r\n      {eventList.map(event=><EventBox key={event.id} event={event}></EventBox>)}\r\n    </>\r\n    )\r\n  }\r\n  return (\r\n    <>\r\n      {qieZhe[0]&&qieZhe.map(event=><Row justify=\"space-around\" align=\"middle\">\r\n          <Col>{t('切れ者')}</Col>\r\n          <EventBox event={event}></EventBox>\r\n        </Row>\r\n      )}\r\n      <Tabs defaultActiveKey=\"1\">\r\n        <Tabs.TabPane tab={t('有选项')} key=\"1\">\r\n          {eventList.filter(event=>event.choiceList.length > 1).map(event=><EventBox key={event.id} event={event} ></EventBox>)}\r\n        </Tabs.TabPane>\r\n        <Tabs.TabPane tab={t('无选项')} key=\"2\">\r\n          {eventList.filter(event=>event.choiceList.length <= 1).map(event=><EventBox key={event.id} event={event}></EventBox>)}\r\n        </Tabs.TabPane>\r\n      </Tabs>\r\n    </>\r\n  )\r\n}\r\nconst EventBox = (props)=>{\r\n  const ChoiceItem = props.event.choiceList.map((choice,index)=>{\r\n    const ResultItem = choice[1].map((result,index)=>\r\n      <p key={index}>{result}</p>\r\n    )\r\n    return(\r\n      <Row key={index} gutter={[8,8]} className=\"list-row\">\r\n        <Col span={12}>\r\n          <p>{choice[0]}</p>\r\n          <p>{t(choice[0])}</p>\r\n        </Col>\r\n        <Col span={12}>{ResultItem}</Col>\r\n      </Row>\r\n    )\r\n  })\r\n\r\n  return(\r\n    <Popover\r\n    mouseEnterDelay={0.4}\r\n      trigger={ua==='mo'?'click':'hover'}\r\n      content={<>\r\n      <p>{t(props.event.name)}</p>\r\n      {ChoiceItem}\r\n    </>} title={props.event.name} placement={'bottom'}>\r\n      <Button className='event-button'>{props.event.name}</Button>\r\n    </Popover>\r\n  )\r\n}\r\n\r\nexport {EventList}\r\n","import React from 'react';\r\n// import {useState} from 'react';\r\nimport { Table, Popover, Slider, Row ,Col} from \"antd\";\r\n\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from './t.js'\r\n\r\n\r\nconst ua = dbL.get('ua').value();\r\n// \"limit_lv5\": -1,\r\n// \"limit_lv10\": 5,\r\n// \"limit_lv15\": -1,\r\n// \"limit_lv20\": -1,\r\n// \"limit_lv25\": 35,\r\n// \"limit_lv30\": 35,\r\n// \"limit_lv35\": -1,\r\n// \"limit_lv40\": -1,\r\n// \"limit_lv45\": 50,\r\n// \"limit_lv50\": -1\r\nconst effects = db.get('effects').value()\r\nconst limits = [\r\n  \"init\",\r\n  \"limit_lv5\",\r\n  \"limit_lv10\",\r\n  \"limit_lv15\",\r\n  \"limit_lv20\",\r\n  \"limit_lv25\",\r\n  \"limit_lv30\",\r\n  \"limit_lv35\",\r\n  \"limit_lv40\",\r\n  \"limit_lv45\",\r\n  \"limit_lv50\"]\r\nconst getValue = (effect,cur) =>{\r\n  if(effect[cur]!==-1){\r\n    return effect[cur]\r\n  }else{\r\n    let index = limits.indexOf(cur)\r\n    let min = 0\r\n    let min_limit = \"init\"\r\n    let max = 0\r\n    let max_limit = \"limit_lv50\"\r\n    for(let limit of limits.slice(0,index)){\r\n      if(effect[limit]>min){\r\n        min = effect[limit]\r\n        min_limit = limit\r\n      }\r\n    }\r\n    for(let limit of limits.slice(index,limits.length)){\r\n      if(effect[limit]!==-1){\r\n        max = effect[limit]\r\n        max_limit = limit\r\n        break\r\n      }\r\n    }\r\n    // cur=40 lv35=40 lv40=-1 lv50=-1\r\n    if(max<=min || max - min === 1 || min === 0){\r\n      return min\r\n    }else{\r\n      // console.table({\r\n      //   name:effects[effect.type].name,\r\n      //   cname:t(effects[effect.type].name),\r\n      //   cur,min_limit,min,max_limit,max,\r\n      //   'max-min':max-min,\r\n      //   'max_limit - min_limit':limits.indexOf(max_limit)-limits.indexOf(min_limit),\r\n      //   'cur - min_limit':limits.indexOf(cur)-limits.indexOf(min_limit),\r\n      //   cur_value:min+(max-min)*(limits.indexOf(cur)-limits.indexOf(min_limit))/(limits.indexOf(max_limit)-limits.indexOf(min_limit))\r\n      // })\r\n      return Math.floor(min+(max-min)*(limits.indexOf(cur)-limits.indexOf(min_limit))/(limits.indexOf(max_limit)-limits.indexOf(min_limit)))+`(${t('插值')})`\r\n    }\r\n  }\r\n}\r\nconst EffectTable = (props)=>{\r\n\r\n  const effects = db.get('effects').value()\r\n  let columns = [\r\n    {title:t('效果'),dataIndex:'type',key:'type',render:type=><Popover trigger={ua==='mo'?'click':'hover'} content={<>\r\n      <p>{effects[type].name}</p>\r\n      <p>{t(effects[type].name)}</p>\r\n      <p>{effects[type].description}</p>\r\n      <p>{t(effects[type].description)}</p>\r\n    </>}>\r\n      <p>{t(effects[type].name)}</p>\r\n    </Popover>},\r\n    {title:t('初始'),dataIndex:'init',key:'init',render:(text,record)=>getValue(record,'init')},\r\n    // {title:'lv5',dataIndex:'limit_lv5',key:'limit_lv5',render:(text,record)=>getValue(record,'limit_lv5')},\r\n    // {title:'lv10',dataIndex:'limit_lv10',key:'limit_lv10',render:(text,record)=>getValue(record,'limit_lv10')},\r\n    // {title:'lv15',dataIndex:'limit_lv15',key:'limit_lv15',render:(text,record)=>getValue(record,'limit_lv15')},\r\n    // {title:'lv20',dataIndex:'limit_lv20',key:'limit_lv20',render:(text,record)=>getValue(record,'limit_lv20')},\r\n    {title:'lv25',dataIndex:'limit_lv25',key:'limit_lv25',render:(text,record)=>getValue(record,'limit_lv25')},\r\n    {title:'lv30',dataIndex:'limit_lv30',key:'limit_lv30',render:(text,record)=>getValue(record,'limit_lv30')},\r\n    {title:'lv35',dataIndex:'limit_lv35',key:'limit_lv35',render:(text,record)=>getValue(record,'limit_lv35')},\r\n    {title:'lv40',dataIndex:'limit_lv40',key:'limit_lv40',render:(text,record)=>getValue(record,'limit_lv40')},\r\n    {title:'lv45',dataIndex:'limit_lv45',key:'limit_lv45',render:(text,record)=>getValue(record,'limit_lv45')},\r\n    {title:'lv50',dataIndex:'limit_lv50',key:'limit_lv50',render:(text,record)=>getValue(record,'limit_lv50')},\r\n      ]\r\n  if(props.rarity ===2 ){\r\n    columns = columns.slice(0,columns.length-1)\r\n  }else if(props.rarity === 1){\r\n    columns = columns.slice(0,columns.length-2)\r\n  }\r\n\r\n  return(<Table columns={columns} dataSource={props.effects} rowKey='type' pagination={false}></Table>)\r\n}\r\n\r\nconst getEffectMark = (maxLevel) =>{\r\n  let ok = {\r\n    1:'lv1',5:'lv5',10:'lv10',15:'lv15',20:'lv20',\r\n    25:'lv25',30:'lv30',35:'lv35',40:'lv40'\r\n  }\r\n  if(maxLevel>=45){\r\n    ok[45] = 'lv45'\r\n  }\r\n  if(maxLevel===50){\r\n    ok[50] = 'lv50'\r\n  }\r\n  return ok\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass TestEffectTable extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n    this.effects = db.get('effects').value();\r\n    let maxLevel = 1;\r\n    switch (props.rarity) {\r\n      case 1:\r\n        maxLevel = 40;\r\n        break;\r\n      case 2:\r\n        maxLevel = 45;\r\n        break;\r\n      case 3:\r\n        maxLevel = 50;\r\n        break;\r\n      default:\r\n        maxLevel = 1;\r\n    }\r\n\r\n    this.maxLevel = maxLevel;\r\n    this.state={\r\n      selectingLevel:maxLevel,\r\n    }\r\n  }\r\n\r\n  calc(data,input){\r\n    let nodes = [];\r\n    let output = 0;\r\n    const maxLevel = this.maxLevel;\r\n    let prevNode = {level:0,value:0};\r\n    for (let i = 0; i<data.length;i += 1){\r\n      if(data[i] !== -1){\r\n        let level = i*5;\r\n        if (level === 0){\r\n          level = 1\r\n        }\r\n        nodes.push({level:level,value:data[i]})\r\n        prevNode = {level:level,value:data[i]};\r\n      }\r\n      if(i === data.length-1 && data[i] === -1){\r\n        nodes.push({level:maxLevel,value:prevNode.value})\r\n      }\r\n    }\r\n    nodes.push({level:999,value:prevNode.value}); // 以后万一出SSSR？确保一定能找到区间。\r\n\r\n    const level = Math.floor(input);\r\n    let upperNode = {level:0,value:0};\r\n    let lowerNode = {level:0,value:0};\r\n    if(level < 0 || level > maxLevel){\r\n        output = 0;\r\n    }else if(level<nodes[0].level){\r\n        output = 0;\r\n    }else {\r\n      for(let i=0;i<nodes.length;i+=1){\r\n        if (level>=nodes[i].level && level < nodes[i+1].level){\r\n          lowerNode = nodes[i];\r\n          upperNode = nodes[i+1] || nodes[i];\r\n          break;\r\n        }\r\n      }\r\n      output = Math.floor((upperNode.value-lowerNode.value)/(upperNode.level-lowerNode.level)*(level-lowerNode.level)+lowerNode.value);\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n\r\n  effectCapsuleStyle = {\r\n    display:'flex',\r\n    alignItems:'center',\r\n    flexDirection:'row',\r\n    margin:2,\r\n    borderRadius:'12px',\r\n    backgroundColor:'#32cd32C0',\r\n    borderStyle:'solid',\r\n    borderWidth:'thin',\r\n    borderColor:'#32cd32F0'\r\n}\r\n\r\n    effectRightDivStyle={\r\n    padding:8,\r\n    display:'flex',\r\n    height:'100%',\r\n    width:'60%',\r\n    backgroundColor:'white',\r\n    borderRadius:'0 12px 12px 0',\r\n    }\r\n\r\n    effectNameStyle={\r\n      fontSize:18,\r\n      fontWeight: 500,\r\n      color:'#333333',\r\n      textShadow: \"0 2px #cccccc70\",\r\n      overflow: 'hidden',\r\n      whiteSpace: 'nowrap',\r\n      textOverflow: 'ellipsis',\r\n    }\r\n\r\n    effectValueStyle = {\r\n      fontSize:18,\r\n      fontWeight: 600,\r\n      color:'#333333',\r\n    }\r\n    effectBoxStyle = {\r\n      display:'flex',\r\n      flexDirection:'row',\r\n      alignItems:'center',\r\n      width:'100%',\r\n      padding:8,\r\n      justifyContent:'space-between'\r\n    }\r\n  render() {\r\n    return(\r\n      <div>\r\n        {this.props.unique_effect&&<>\r\n        <div style={{...this.effectBoxStyle}}>\r\n          <text style={{...this.effectValueStyle,fontSize:18,marginRight:16}}>\r\n            {t('固有效果')}\r\n          </text>\r\n          <text style={{...this.effectValueStyle,fontSize:18,marginRight:16}}>\r\n            {`${t('激活等级')}:${this.props.unique_effect.lv}`}\r\n          </text>\r\n        </div>\r\n        <Row>\r\n          {['0','1'].map(index=>\r\n            <Col span={12} key={index}>\r\n              <div style={{...this.effectCapsuleStyle}}>\r\n            <Popover trigger={ua==='mo'?'click':'hover'} content={<>\r\n              <p>{this.effects[this.props.unique_effect[`type_${index}`]].name}</p>\r\n              <p>{t(this.effects[this.props.unique_effect[`type_${index}`]].name)}</p>\r\n              <p>{this.effects[this.props.unique_effect[`type_${index}`]].description}</p>\r\n              <p>{t(this.effects[this.props.unique_effect[`type_${index}`]].description)}</p>\r\n            </>}>\r\n              <div style={{display:'flex',padding:8,width:'40%'}}>\r\n                <text style={{...this.effectNameStyle}}>\r\n                  {t(this.effects[this.props.unique_effect[`type_${index}`]].name)}\r\n                </text>\r\n              </div>\r\n            </Popover>\r\n                <div style={{...this.effectRightDivStyle}}>\r\n                  <text style={{...this.effectValueStyle}}>\r\n                  {this.props.unique_effect[`value_${index}`]}\r\n                  </text>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n        </>}\r\n\r\n        <div style={{...this.effectBoxStyle}}>\r\n          <text style={{...this.effectValueStyle,fontSize:18,marginRight:16}}>\r\n            {t('设置等级')}\r\n          </text>\r\n          <Slider\r\n            style={{width:'80%',marginRight:16}}\r\n            min={1}\r\n            max={this.maxLevel}\r\n            value={this.state.selectingLevel}\r\n            onChange={(value)=>{this.setState({selectingLevel:value})}}\r\n            marks={getEffectMark(this.maxLevel)}\r\n          />\r\n        </div>\r\n        <Row>\r\n          {this.props.effects?.map(\r\n            (item,index)=>{\r\n              const data = [item.init,item.limit_lv5,item.limit_lv10,item.limit_lv15,item.limit_lv20,item.limit_lv25,item.limit_lv30,item.limit_lv35,item.limit_lv40,item.limit_lv45,item.limit_lv50].filter((item)=>(item));\r\n              return (\r\n                <Col span={12} key={index}>\r\n                  <div style={{...this.effectCapsuleStyle}}>\r\n                <Popover trigger={ua==='mo'?'click':'hover'} content={<>\r\n                  <p>{this.effects[item.type].name}</p>\r\n                  <p>{t(this.effects[item.type].name)}</p>\r\n                  <p>{this.effects[item.type].description}</p>\r\n                  <p>{t(this.effects[item.type].description)}</p>\r\n                </>}>\r\n                  <div style={{display:'flex',padding:8,width:'40%'}}>\r\n                    <text style={{...this.effectNameStyle}}>{t(this.effects[item.type].name)}</text>\r\n                  </div>\r\n                </Popover>\r\n                    <div style={{...this.effectRightDivStyle}}>\r\n                      <text style={{...this.effectValueStyle}}>\r\n                      {this.calc(data,this.state.selectingLevel)}\r\n                      </text>\r\n                    </div>\r\n                  </div>\r\n                </Col>\r\n              )\r\n            }\r\n          )}\r\n          </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport {EffectTable,TestEffectTable}\r\n","import React,{useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport { Button, Divider, Image, Alert,Tooltip,Modal } from \"antd\";\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from './t.js'\r\n\r\nimport {EventList} from './event.js'\r\nimport {SkillList} from './skill-detail.js'\r\nimport {EffectTable,TestEffectTable} from './effect.js'\r\nconst ua = dbL.get('ua').value();\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n\r\n\r\nconst SupportDetail = (props) =>{\r\n  const id = props.supportId || props.match.params.supportId\r\n  const data = db.get('supports').find({id}).value()\r\n  return(<>\r\n    <div style={{display:'flex',alignItems:'center',justifyContent:'flex-start',height:192,padding:16}}>\r\n      <Image src={cdnServer+data.imgUrl} preview={false} width={128} />\r\n      <div style={{display:'flex',flexDirection:'column',justifyContent:'space-around',height:'100%',padding:16}}>\r\n        <div style={{fontSize:20,fontWeight:700}}>{t(data.name)}</div>\r\n        <div style={{fontSize:20,fontWeight:700,color:'gray'}}>{data.name}</div>\r\n        <div style={{fontSize:20,fontWeight:700}}>{t(data.charaName)}</div>\r\n        <div style={{fontSize:20,fontWeight:700,color:'gray'}}>{data.charaName}</div>\r\n      </div>\r\n    </div>\r\n    <EventList eventList={data.eventList} pid={data.id}></EventList>\r\n    <Divider style={{margin:'4px 0'}}>{t('事件技能')}</Divider>\r\n    <SkillList skillList={data.trainingEventSkill}></SkillList>\r\n    <Divider style={{margin:'4px 0'}}>{t('训练技能')}</Divider>\r\n    <SkillList skillList={data.possessionSkill}></SkillList>\r\n    <Divider>{t('育成效果')}</Divider>\r\n    <TestEffectTable effects={data.effects} unique_effect={data.unique_effect} rarity={data.rarity}></TestEffectTable>\r\n    <Alert message={t('中间数值为插值，存在误差')} type=\"info\" />\r\n    <EffectTable effects={data.effects} rarity={data.rarity}></EffectTable>\r\n  </>)\r\n}\r\nconst SupportCard = (props)=>{\r\n  const history = useHistory();\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const support = props.data\r\n\r\n  const showSupportDetail = () => {\r\n    if(props.onSelect){\r\n      props.onSelect(props.data)\r\n    }else{\r\n      if(ua==='mo'){\r\n        history.push(`/support-detail/${support.id}`)\r\n      }else{\r\n        setIsModalVisible(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title={`${support.name}----${t(support.charaName)}`}>\r\n        <Image src={cdnServer+support.imgUrl} preview={false}  onClick={showSupportDetail} alt={support.charaName} width={'100%'}></Image>\r\n      </Tooltip>\r\n\r\n      <Modal title={`${support.name}----${t(support.charaName)}`}\r\n            visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}\r\n            width={800} destroyOnClose={true}>\r\n        <SupportDetail supportId={support.id}></SupportDetail>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\nexport {SupportDetail,SupportCard}\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport { withRouter, useHistory, useLocation } from 'react-router-dom';\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport { Row, Col, Popover, Button, Image, Checkbox, Divider, Input, Tooltip, Switch } from 'antd';\r\nimport t from './t.js'\r\nimport { SupportCard } from './support-detail.js'\r\nimport { PlayerCard } from './player-detail.js'\r\nimport ScrollBars from 'react-custom-scrollbars'\r\n\r\nconst Search = Input.Search\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n\r\nconst ua = dbL.get('ua').value();\r\nconst allSkillList = db.get('skills').orderBy('db_id').value()\r\n\r\nconst options = {\r\n  distance_type: [\r\n    { label: t('短距離'), value: '1' },\r\n    { label: t('マイル'), value: '2' },\r\n    { label: t('中距離'), value: '3' },\r\n    { label: t('長距離'), value: '4' },\r\n  ],\r\n  running_style: [\r\n    { label: t('逃げ'), value: '1' },\r\n    { label: t('先行'), value: '2' },\r\n    { label: t('差し'), value: '3' },\r\n    { label: t('追込'), value: '4' },\r\n    { label: t('通用'), value: '-1' },\r\n  ],\r\n  phase: [\r\n    { label: t('序盤'), value: '0' },\r\n    { label: t('中盤'), value: '1' },\r\n    { label: t('終盤'), value: '2' },\r\n    { label: t('冲刺'), value: '3' },\r\n  ],\r\n  corner_random: [\r\n    { label: t('コーナー'), value: '1' },\r\n  ],\r\n  straight_random: [\r\n    { label: t('直線'), value: '1' },\r\n  ],\r\n  is_finalcorner: [\r\n    { label: t('最終直線/コーナー'), value: '1' },\r\n  ]\r\n  // is_finalcorner==1&corner==0\r\n}\r\nconst skillType = {\r\n  1: '速度属性',\r\n  2: '耐力属性',\r\n  3: '力量属性',\r\n  4: '毅力属性',\r\n  5: '智力属性',\r\n  6: '体力',\r\n  7: '体力消耗',\r\n  8: '视野',\r\n  9: '体力恢复',\r\n  10: '出栏时机',\r\n  14: '掛かり结束时间',\r\n  21: '瞬时速度',\r\n  27: '目标速度',\r\n  28: '走位速度',\r\n  31: '加速度',\r\n}\r\n\r\nconst SkillList = (props) => {\r\n  const skillList = props.skillList\r\n\r\n  return (\r\n    <Row gutter={0}>\r\n      {skillList.map((skillId, index) =>\r\n        <Col span={12} key={index}>\r\n          <SkillButton id={skillId} usedInList={true} isNur={props.isNur || false}>\r\n          </SkillButton>\r\n        </Col>)}\r\n    </Row>\r\n  )\r\n}\r\nconst allSupportList = db.get('supports').value()\r\nconst allPlayerList = db.get('players').value()\r\n\r\nconst SkillDetail = (props) => {\r\n  const skill = props.skill || db.get('skills').find({ id: props.match?.params?.id }).value()\r\n  const isNur = props.isNur !== undefined ? props.isNur : parseInt(props.match?.params?.nur)\r\n  const supportList = allSupportList.filter(support => {\r\n    let flag = 0;\r\n    support.skillList.forEach(id => {\r\n      if (id === skill?.id) {\r\n        flag = 1\r\n      }\r\n    })\r\n    return flag\r\n  })\r\n  const playerList = allPlayerList.filter(player => {\r\n    let flag = 0;\r\n    player.skillList.forEach(id => {\r\n      if (id === skill?.id) {\r\n        flag = 1\r\n      }\r\n    })\r\n    return flag\r\n  })\r\n\r\n  return <div style={{\r\n    maxWidth: 600, maxHeight: window.innerHeight - 104,\r\n    overflow: 'auto', textAlign: 'left',\r\n    overflowWrap: 'break-word', wordBreak: 'break-all'\r\n  }}>\r\n    <Image src={cdnServer + skill?.imgUrl} preview={false} width={52}></Image>\r\n    <p>{`${t('技能名称')}:\\xa0\\xa0${skill?.name}`}</p>\r\n    <p>{`${t('技能名称')}:\\xa0\\xa0${t(skill?.name)}`}</p>\r\n    <p>{`${t('技能描述')}:\\xa0\\xa0${skill?.describe}`}</p>\r\n    <p>{`${t('技能描述')}:\\xa0\\xa0${t(skill?.describe)}`}</p>\r\n    <p>{`${t('触发条件')}:\\xa0\\xa0${skill?.condition}`}</p>\r\n    <p>{`${t('触发条件')}:\\xa0\\xa0${t(skill?.condition)}`}</p>\r\n    <p>{`${t('技能效果')}:\\xa0\\xa0${skill?.ability?.map(ability => skillType[ability.type] + ' ' + ability.value / 10000)}`}</p>\r\n    <p>{`${t('持续时间')}:\\xa0\\xa0${skill?.ability_time / 10000}s*${t('赛道长度')}/1000`}</p>\r\n    <p>{`${t('冷却时间')}:\\xa0\\xa0${skill?.cooldown / 10000}s*${t('赛道长度')}/1000`}</p>\r\n    <p>{`${t('技能价格')}:\\xa0\\xa0${skill?.need_skill_point}\\xa0Pt`}</p>\r\n    <p>{`${t('技能评分')}:\\xa0\\xa0${skill?.grade_value}`}</p>\r\n    {!isNur && <>\r\n      <Divider>{t('支援卡')}</Divider>\r\n      <Row>\r\n        {supportList.sort((a, b) => b.rarity - a.rarity).map(support =>\r\n          <Col span={4} key={support.id}>\r\n            <SupportCard data={support} onSelect={() => null}></SupportCard>\r\n          </Col>)\r\n        }\r\n      </Row>\r\n      <Divider>{t('角色')}</Divider>\r\n      <Row>\r\n        {playerList.sort((a, b) => b.rarity - a.rarity).map(player =>\r\n          <Col span={4} key={player.id}>\r\n            <PlayerCard data={player} onSelect={() => null}></PlayerCard>\r\n          </Col>)\r\n        }\r\n      </Row>\r\n    </>}\r\n  </div>\r\n}\r\nconst SkillButton = (props) => {\r\n  const history = useHistory();\r\n  const skill = props.skill || db.get('skills').find({ id: props.id }).value()\r\n\r\n  const toSkillDetail = (id) => {\r\n    if (ua === 'mo') {\r\n      history.push(`/skill-detail/${id}`)\r\n    }\r\n  }\r\n\r\n  const inListStyleOverride = {\r\n    borderRadius: '8px',\r\n    color: '#303030',\r\n    width: '96%',\r\n    justifyContent: 'flex-start'\r\n  }\r\n  const skillNameStyle = {\r\n    width: `calc(96% - 34px)`,\r\n    overflow: 'hidden',\r\n    whiteSpace: 'nowrap',\r\n    textOverflow: 'ellipsis',\r\n    textAlign: 'justify'\r\n  }\r\n\r\n  return <Popover\r\n    mouseEnterDelay={0.4}\r\n    visible={ua === 'mo' ? false : undefined}\r\n    content={\r\n      <SkillDetail skill={skill} isNur={props.isNur || false}></SkillDetail>\r\n    }>\r\n    <Button type={'primary'} className={'skill-btn skill-btn-' + skill?.rarity}\r\n      style={props.usedInList ? { ...inListStyleOverride } : {}}\r\n      onClick={() => toSkillDetail(skill?.id)}>\r\n      <div style={props.usedInList ?\r\n        { display: 'flex', position: 'absolute', top: 4, left: 8, width: '100%' } : { width: '100%' }}>\r\n        <Image src={cdnServer + skill?.imgUrl} preview={false} width={26}></Image>\r\n        <div style={{ ...skillNameStyle }}>{`\\xa0\\xa0${skill?.name}`}</div>\r\n      </div>\r\n    </Button>\r\n  </Popover>\r\n}\r\n\r\nconst SkillCheckboxGroup = React.memo((props) => {\r\n  const { options, name, value } = props;\r\n  const onChange = (checkedValues) => {\r\n    props.onChange(name, checkedValues);\r\n  }\r\n\r\n  return <Checkbox.Group options={options} value={value} onChange={onChange} />\r\n});\r\n\r\nconst SkillCheckbox = React.memo((props) => {\r\n  const [skillChecked1, setSkillChecked1] = useState([]);\r\n  const [skillChecked2, setSkillChecked2] = useState([]);\r\n  const [checkboxGroupValues, setCheckedboxGroupValues] = useState({});\r\n  // init isOwn\r\n  localStorage.getItem('isOwn') === null && localStorage.setItem('isOwn', 0)\r\n  const [isOwn, setIsOwn] = useState(parseInt(localStorage.getItem('isOwn')))\r\n  const mySupports = dbL.get('mySupports').value()\r\n  const mySkillList = new Set(mySupports.reduce((list, supportId) => {\r\n    let support = db.get('supports').find({ id: supportId }).value()\r\n    return list.concat(support.skillList)\r\n  }, []))\r\n  const checkOptions1 = [\r\n    { label: '速度被动(绿)', value: '10011' },\r\n    { label: '耐力被动(绿)', value: '10021' },\r\n    { label: '力量被动(绿)', value: '10031' },\r\n    { label: '毅力被动(绿)', value: '10041' },\r\n    { label: '智力被动(绿)', value: '10051' },\r\n    { label: '耐力恢复(蓝)', value: '20021' },\r\n    { label: '速度提高(黄)', value: '20011' },\r\n    // {label:'20031',value:'20031'},\r\n    { label: '加速度提高(黄)', value: '20041' },\r\n    { label: '切换跑道(黄)', value: '20051' },\r\n    { label: '起步时间(黄)', value: '20061' },\r\n    // {label:'20071',value:'20071'},\r\n    // {label:'20081',value:'20081'},\r\n    { label: '视野提高(黄)', value: '20091' },\r\n    { label: '速度降低(红)', value: '30011' },\r\n    { label: '无法冷静(红)', value: '30041' },\r\n    { label: '耐力降低(红)', value: '30051' },\r\n    { label: '视野降低(红)', value: '30071' }\r\n  ]\r\n  const checkOptions2 = [\r\n    { label: t('ノーマル'), value: 'ノーマル' },\r\n    { label: t('レア'), value: 'レア' },\r\n    { label: t('固有'), value: '固有' }\r\n  ]\r\n  const onChange1 = (checkedValues) => {\r\n    setSkillChecked1(checkedValues)\r\n    updateSkillList(filteredSkills, checkedValues, skillChecked2, isOwn)\r\n  }\r\n  const onChange2 = (checkedValues) => {\r\n    setSkillChecked2(checkedValues)\r\n    updateSkillList(filteredSkills, skillChecked1, checkedValues, isOwn)\r\n  }\r\n  const filteredSkills = React.useMemo(() => Object.entries(checkboxGroupValues)\r\n    .reduce((l, [key, values]) =>\r\n      values.length > 0\r\n        ? l.filter(skill => {\r\n          if (!skill?.condition) {\r\n            return false\r\n          }\r\n          switch (key) {\r\n            case 'phase':\r\n              return ['phase', 'phase_random'].map(\r\n                _key => values.map(value => `${_key}==${value}`)\r\n              ).flat().some(phrase => skill?.condition.includes(phrase));\r\n            case 'running_style':\r\n              return (values.map(value => `${key}==${value}`)\r\n                .some(phrase => skill?.condition.includes(phrase))) || (values.includes('-1') && !skill?.condition.includes(`${key}==`));\r\n            default:\r\n              return values.map(value => `${key}==${value}`)\r\n                .some(phrase => skill?.condition.includes(phrase));\r\n          }\r\n        })\r\n        : l,\r\n      allSkillList),\r\n    [checkboxGroupValues, allSkillList])\r\n  useEffect(() => {\r\n    updateSkillList(filteredSkills, skillChecked1, skillChecked2, isOwn)\r\n  }, [filteredSkills]);\r\n\r\n  const onCheckboxGroupsChange = React.useCallback((groupName, checkedValues) => {\r\n    setCheckedboxGroupValues({ ...checkboxGroupValues, ...{ [groupName]: checkedValues } });\r\n  }, [checkboxGroupValues]);\r\n\r\n  const updateSkillList = (tempSkillList, check2, check3, isOwn) => {\r\n    const check1 = Object.values(checkboxGroupValues).flat();\r\n    if (check2.length) {\r\n      tempSkillList = tempSkillList.filter(skill => {\r\n        let flag = 0;\r\n        check2.forEach(value => {\r\n          let str = skill?.icon_id + ''\r\n          if (str) {\r\n            if (str[0] === value[0] && str[3] === value[3]) {\r\n              flag = 1\r\n            }\r\n          }\r\n        })\r\n        return flag\r\n      })\r\n    }\r\n    if (check3.length) {\r\n      tempSkillList = tempSkillList.filter(skill => {\r\n        let flag = 0;\r\n        check3.forEach(value => {\r\n          if (skill?.rare === value) {\r\n            flag = 1\r\n          }\r\n        })\r\n        return flag\r\n      })\r\n    }\r\n    if (isOwn) {\r\n      tempSkillList = tempSkillList.filter(skill => {\r\n        return mySkillList.has(skill?.id)\r\n      })\r\n    }\r\n    if (check1.length || check2.length || check3.length || isOwn) {\r\n      tempSkillList.push({\r\n        id: 'default'\r\n      })\r\n    }\r\n    if (props.needId) {\r\n      tempSkillList = tempSkillList.reduce((list, skill) => {\r\n        list.push(skill?.id)\r\n        return list\r\n      }, [])\r\n    }\r\n    props.onUpdate(tempSkillList)\r\n  }\r\n  const resetCheckbox = () => {\r\n    setCheckedboxGroupValues({})\r\n    setSkillChecked1([])\r\n    setSkillChecked2([])\r\n    props.onUpdate(allSkillList)\r\n  }\r\n  const changeMode = () => {\r\n    let curValue = 1 - isOwn\r\n    localStorage.setItem('isOwn', curValue)\r\n    setIsOwn(curValue)\r\n    // console.log(curValue)\r\n    updateSkillList(filteredSkills, skillChecked1, skillChecked2, curValue)\r\n  }\r\n  const onSearch = (searchText) => {\r\n    const fullSkillList = allSkillList;\r\n    const tempSkillList = fullSkillList.filter(item => (item.name).indexOf(searchText) > -1);\r\n    setCheckedboxGroupValues({})\r\n    setSkillChecked1([])\r\n    setSkillChecked2([])\r\n    props.onUpdate(tempSkillList)\r\n  };\r\n  return (<>{props.checkOnly ?\r\n    <>\r\n      {Object.entries(options).map(([gourpName, value]) => <SkillCheckboxGroup name={gourpName} value={checkboxGroupValues[gourpName]} options={value} onChange={onCheckboxGroupsChange} />)}\r\n      <Divider />\r\n      {/* <Checkbox.Group options={checkOptions1} value={skillChecked1} onChange={onChange1} /> */}\r\n      <Checkbox.Group value={skillChecked1} onChange={onChange1}>\r\n        <Row>\r\n          {checkOptions1.map(checkItem =>\r\n            <Col span={12}>\r\n              {/* https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/img/skill_icons/10011.png */}\r\n              <Checkbox value={checkItem.value} style={{ display: 'flex',alignItems: 'center' }}>\r\n                <div style={{ display: 'flex' }}>\r\n                <Image src={cdnServer + 'img/skill_icons/' + checkItem.value + '.png'} preview={false} width={26}></Image>\r\n                <div style={{flex:'auto',overflow: 'hidden',whiteSpace: 'nowrap'}}>{checkItem.label}</div>\r\n                </div>\r\n              </Checkbox>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </Checkbox.Group>\r\n      <Divider />\r\n      <Checkbox.Group options={checkOptions2} value={skillChecked2} onChange={onChange2} />\r\n    </>\r\n    :\r\n    <div>\r\n      <div style={{ height: 16 }} />\r\n      <Button type={'danger'} onClick={resetCheckbox} style={{ width: '100%' }}>{t('重置')}\r\n      </Button>\r\n      <Divider />\r\n      <div>\r\n        <Tooltip title={t(\"可以在支援卡页面配置\")}>\r\n          <span style={{ margin: '0 10px 0 0', lineHeight: '32px' }}>{t('显示拥有支援卡')}</span>\r\n          <Switch checked={isOwn} onChange={changeMode} />\r\n        </Tooltip>\r\n      </div>\r\n      <span style={{ margin: '0 10px 0 0', lineHeight: '32px' }}>{t('技能搜索')}</span>\r\n      <Search placeholder={t(\"输入关键词\")} enterButton={t(\"搜索\")} size=\"middle\"\r\n        style={{ width: '100%' }} onSearch={onSearch} />\r\n      <Divider />\r\n      {Object.entries(options).map(([gourpName, value]) => <SkillCheckboxGroup name={gourpName} value={checkboxGroupValues[gourpName]} options={value} onChange={onCheckboxGroupsChange} />)}\r\n      <Divider />\r\n      <Checkbox.Group value={skillChecked1} onChange={onChange1}>\r\n        <Row>\r\n          {checkOptions1.map(checkItem =>\r\n            <Col span={12}>\r\n              {/* https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/img/skill_icons/10011.png */}\r\n              <Checkbox value={checkItem.value} style={{ display: 'flex',alignItems: 'center' }}>\r\n                <div style={{ display: 'flex' }}>\r\n                <Image src={cdnServer + 'img/skill_icons/' + checkItem.value + '.png'} preview={false} width={26}></Image>\r\n                <div style={{flex:'auto',overflow: 'hidden',whiteSpace: 'nowrap'}}>{checkItem.label}</div>\r\n                </div>\r\n              </Checkbox>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </Checkbox.Group>\r\n      <Divider />\r\n      <Checkbox.Group options={checkOptions2} value={skillChecked2} onChange={onChange2} />\r\n    </div>}\r\n  </>\r\n  )\r\n})\r\n\r\n\r\nexport { SkillList, SkillButton, SkillCheckbox, SkillDetail }\r\n","import React from 'react';\r\nimport {useState} from 'react';\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\n\r\nimport { Row,Col,Timeline,Checkbox,Button } from 'antd';\r\nimport { createFormattedComponent } from 'react-intl/src/components/createFormattedComponent';\r\nimport { getTimeProps } from 'antd/lib/date-picker/generatePicker';\r\nimport t from './t.js'\r\n\r\nconst ua = dbL.get('ua').value();\r\n\r\nconst RaceSchedule = (props)=>{\r\n  // const races = db.get('races').value()\r\n  const str  = []\r\n  const getDate = (i)=>{\r\n    let year = Math.floor(i/24)+1\r\n    let month = Math.floor((i - (year-1)*24) /2)+1\r\n    let moment = i%2?'后':'前'\r\n    return `${year}年${month}月${moment}`\r\n  }\r\n  for (let i = 13;i<72;i++){\r\n    let curRace;\r\n    if(props.raceList&&props.raceList[i]){\r\n      curRace = db.get('races').find({id:props.raceList[i].id}).value()\r\n      str.push(<Col span={6} key={i}\r\n      style={{backgroundColor:'#ff6b81',border:'1px solid #2f3542'}}>\r\n        {getDate(i)}\r\n        <br/>\r\n        {`${curRace.name}/${curRace.distanceType}/${props.raceList[i].goal}`}\r\n        {/* -{curRace.date} */}\r\n        </Col>)\r\n    }else if(props.filterRace&&props.filterRace[i]){\r\n      str.push(<Col span={6} key={i}\r\n        style={{\r\n        backgroundColor:'#7bed9f',\r\n        border:'1px solid #2f3542',\r\n        whiteSpace:'pre-line'}}>\r\n        {getDate(i)}\r\n        <br/>\r\n        {props.filterRace[i].map(raceId=>{\r\n          let curRace = db.get('races').find({id:raceId}).value()\r\n          return `${curRace.name}/${curRace.grade}/${curRace.distanceType}\\n`\r\n\r\n        })}\r\n        </Col>)\r\n    }else{\r\n      str.push(<Col span={6} key={i}\r\n      style={{backgroundColor:'#a4b0be',border:'1px solid #2f3542'}}>\r\n        {getDate(i)}\r\n      </Col>)\r\n    }\r\n  }\r\n  return(<Row style={{color:'black'}}>\r\n    {str}\r\n  </Row>)\r\n}\r\n\r\nconst raceGolds=[\r\n  {name:'传统三冠',raceNames:['皐月賞30', '日本ダービー東京優駿33','菊花賞43']}, \r\n  {name:'春日三冠',raceNames:['大阪杯53', '天皇賞春55','宝塚記念59']}, \r\n  {name:'秋日三冠',raceNames:['天皇賞秋67', 'ジャパンカップ69','有馬記念71']}, \r\n  {name:'天皇春秋',raceNames:['天皇賞春55', '天皇賞秋67']},\r\n  {name:'纪念春秋Ⅰ',raceNames:['宝塚記念35', '有馬記念47']},\r\n  {name:'纪念春秋Ⅱ',raceNames:['宝塚記念59', '有馬記念71']},\r\n  {name:'母马三冠',raceNames:['桜花賞30', 'オークス33','秋華賞43']}, \r\n  {name:'英里春秋Ⅰ',raceNames:['安田記念34', 'マイルチャンピオンシップ45']},\r\n  {name:'英里春秋Ⅱ',raceNames:['安田記念58', 'マイルチャンピオンシップ69']},\r\n  {name:'泥地春秋',raceNames:['フェブラリーステークス51', 'チャンピオンズカップ70']},\r\n  {name:'短距春秋',raceNames:['高松宮記念53', 'スプリンターズステークス65']}\r\n]\r\nconst getGolds = (race)=>{\r\n  return raceGolds.reduce((golds,raceGold)=>{\r\n    if(raceGold.raceNames.indexOf(race.uniqueName)!==-1){\r\n      golds.push(`${raceGold.name} ${raceGold.raceNames.indexOf(race.uniqueName)+1}/${raceGold.raceNames.length}`)\r\n    }\r\n    return golds\r\n  },[]).join(' , ')\r\n}\r\n\r\nconst RaceTimeline = React.memo((props)=>{\r\n  const [showSpare,setShowSpare] = useState(false)\r\n  const str  = []\r\n\r\n  const getDate = (i)=>{\r\n    let year = Math.floor(i/24)+1\r\n    let month = Math.floor((i - (year-1)*24) /2)+1\r\n    month = month<10?`\\xa0\\xa0${month}`:month\r\n    let moment = i%2?'后':'前'\r\n    return `${year}年\\xa0${month}月${moment}`\r\n  }\r\n  const getColor = (grade)=>{\r\n    switch(grade){\r\n      case 'G1':\r\n        return 'blue';\r\n      case 'G2':\r\n        return 'pink';\r\n      case 'G3':\r\n        return 'green';\r\n      case 'OP':\r\n        return 'orange';\r\n      case 'Pre-OP':\r\n        return 'orange';\r\n      default:\r\n        return 'gray'\r\n    }\r\n  }\r\n  for (let i = 13;i<72;i++){\r\n    let curRace,id,golds;\r\n    if(props.raceList&&props.raceList[i]){\r\n      id = props.raceList[i].id\r\n      curRace = db.get('races').find({id}).value()\r\n      golds = getGolds(curRace)\r\n      str.push(<Timeline.Item label={getDate(i)} color=\"red\" style={{fontSize:'16px'}} key={id}>\r\n        <b>{`${curRace.grade} / ${curRace.distanceType} / ${curRace.distance} / ${curRace.name} / ${props.raceList[i].goal||'参赛'}\r\n          ${golds?' / '+golds:''}`}</b>\r\n      </Timeline.Item>)\r\n    }else if(props.filterRace&&props.filterRace[i]){\r\n      props.filterRace[i].forEach((id,index)=>{\r\n        curRace = db.get('races').find({id}).value()\r\n        golds = getGolds(curRace)\r\n        str.push(<Timeline.Item label={index===0?getDate(i):null} color={getColor(curRace.grade)}\r\n        style={{fontSize:'14px'}} key={id}>\r\n            <p>{`${curRace.grade} / ${curRace.distanceType} / ${curRace.distance} / ${curRace.name}\r\n            ${golds?' / '+golds:''}`}</p>\r\n          </Timeline.Item>)\r\n\r\n      })\r\n    }else{\r\n      //普通\r\n      showSpare&&str.push(<Timeline.Item label={getDate(i)} color={getColor('normal')}\r\n        style={{fontSize:'12px'}}>\r\n            <p></p>\r\n          </Timeline.Item>)\r\n    }\r\n  }\r\n  return(\r\n  <>\r\n  <Button onClick={()=>setShowSpare(!showSpare)}>\r\n    {showSpare?t('隐藏空闲月份'):t('显示空闲月份')}\r\n  </Button>\r\n  <Timeline mode='left' style={{paddingTop:8}}>\r\n    {str}\r\n  </Timeline>\r\n  </>)\r\n})\r\nconst RaceCheckbox = (props) =>{\r\n  const [raceFilterCondition,setRaceFilterCondition] = useState(props.raceFilterCondition)\r\n\r\n  const filterList= {\r\n    distanceType:[\r\n      { label: '短距離', value: '短距離' },\r\n      { label: 'マイル', value: 'マイル' },\r\n      { label: '中距離', value: '中距離' },\r\n      { label: '長距離', value: '長距離' }\r\n    ],\r\n    grade:[\r\n      { label: 'Pre-OP', value: 'Pre-OP' },\r\n      { label: 'OP', value: 'OP' },\r\n      { label: 'G1', value: 'G1' },\r\n      { label: 'G2', value: 'G2' },\r\n      { label: 'G3', value: 'G3' }\r\n    ],\r\n    ground: [\r\n      { label: '芝', value: '芝' },\r\n      { label: 'ダート', value: 'ダート' }\r\n    ],\r\n\r\n  }\r\n  const onChange=(checkedValues,type)=>{\r\n    let tmpObj = {}\r\n    tmpObj[type]=checkedValues\r\n    console.log({...raceFilterCondition,...tmpObj})\r\n    props.onChange({...raceFilterCondition,...tmpObj})\r\n    setRaceFilterCondition({...raceFilterCondition,...tmpObj})\r\n  }\r\n  return (<>\r\n  {Object.keys(filterList)\r\n    .map(key=>\r\n      <div key={key}>\r\n        <Checkbox.Group options={filterList[key]} defaultValue={props.raceFilterCondition[key]} onChange={(checkedValues)=>onChange(checkedValues,key)}/>\r\n      </div>\r\n      )}\r\n  </>)\r\n}\r\nexport {RaceSchedule,RaceTimeline,RaceCheckbox}\r\n","import React,{useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport { Divider,Image,Card,Modal,Table} from 'antd';\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from './t.js'\r\n\r\nimport {EventList} from './event.js'\r\nimport {SkillList} from './skill-detail.js'\r\n// import RaceList from './player-race.js'\r\nimport {RaceSchedule,RaceTimeline} from '../components/race.js'\r\n// import {EffectTable} from './effect.js'\r\nconst ua = dbL.get('ua').value();\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n\r\nconst PlayerDetail = (props) =>{\r\n  const id = props.playerId!==undefined?props.playerId:props.match.params.id\r\n  // 是否育成 育成顺序样式不同\r\n  const isNur = props.isNur!==undefined?props.isNur:parseInt(props.match.params.nur)\r\n  const data = db.get('players').find({id}).value()\r\n  const PlayerItem = () => <div style={{height:69,display:'flex'}}>\r\n    <Image src={cdnServer+data.imgUrl} width={63} height={69} resizemode={'cover'}></Image>\r\n    <div style={{display:'flex',height:64,flexDirection:'column',justifyContent:'space-between'}}>\r\n      <div style={{fontSize:20,fontWeight:700}}>{data.name}</div>\r\n      <div style={{fontSize:20,fontWeight:700,color:'gray'}}>{t(data.name)}</div>\r\n      <div style={{fontSize:20,fontWeight:700}}>{data.charaName}</div>\r\n      <div style={{fontSize:20,fontWeight:700,color:'gray'}}>{t(data.charaName)}</div>\r\n    </div>\r\n  </div>\r\n  if(isNur){\r\n    return <>\r\n      <PlayerItem></PlayerItem>\r\n      <Divider>{t(\"事件\")}</Divider>\r\n      <EventList eventList={data.eventList} pid={data.id} ></EventList>\r\n      <Divider>{t(\"隐藏事件\")}</Divider>\r\n      <EventList eventList={data.hideEvent} pid={data.id} type='all'></EventList>\r\n      <Divider>{t(\"赛程\")}</Divider>\r\n      {/* <RaceSchedule raceList={data.raceList}></RaceSchedule> */}\r\n      <RaceTimeline raceList={data.raceList}></RaceTimeline>\r\n      <Divider>{t(\"技能\")}</Divider>\r\n      <SkillList skillList={data.skillList}></SkillList>\r\n    </>\r\n  }else{\r\n    return <>\r\n    <PlayerItem></PlayerItem>\r\n    <Divider>{t(\"适应\")}</Divider>\r\n    <AdaptBox player={data}></AdaptBox>\r\n    <Divider>{t(\"成长\")}</Divider>\r\n    <GrowBox player={data}></GrowBox>\r\n    <Divider>{t(\"技能\")}</Divider>\r\n    <SkillList skillList={data.skillList}></SkillList>\r\n    <Divider>{t(\"事件\")}</Divider>\r\n    <EventList eventList={data.eventList} pid={data.id} ></EventList>\r\n    <Divider>{t(\"隐藏事件\")}</Divider>\r\n    <EventList eventList={data.hideEvent} pid={data.id} type='all'></EventList>\r\n    <Divider>{t(\"赛程\")}</Divider>\r\n    {/* <RaceSchedule raceList={data.raceList}></RaceSchedule> */}\r\n    <RaceTimeline raceList={data.raceList}></RaceTimeline>\r\n  </>\r\n  }\r\n}\r\nconst coloredGradeText = (text)=>{\r\n  let color = 'gray';\r\n  switch (text) {\r\n    case 'S':\r\n      color = '#FFD700';\r\n      break\r\n    case 'A':\r\n      color = '#FFA500';\r\n      break\r\n    case 'B':\r\n      color = '#BA55D3';\r\n      break\r\n    case 'C':\r\n      color = '#90EE90';\r\n      break\r\n    case 'D':\r\n      color = '#87CEEB';\r\n      break\r\n    default:\r\n      color = 'gray'\r\n  }\r\n  return <div style={{fontSize:22,fontWeight:700,textShadow: \"0 2px #33333370\",color:color}}>{text}</div>\r\n}\r\nconst AdaptBox = (props)=>{\r\n\r\n  const tableStyle = {\r\n    width:\"100%\",\r\n    cellPadding:4,\r\n  }\r\n  const cellStyle = {\r\n    width:'20%',\r\n    height:'32px',\r\n    fontSize: 16,\r\n    textAlign: 'flex-start',\r\n    paddingLeft:16,\r\n    fontWeight: 500,\r\n    borderWidth:'thin',\r\n    borderStyle:'none solid solid none',\r\n    borderColor:'gray',\r\n  }\r\n  const headerCellStyle = {\r\n    width:'20%',\r\n    fontSize: 18,\r\n    textAlign: 'center',\r\n    fontWeight: 600,\r\n    color:'#f5f5f5',\r\n    textShadow: \"0 2px #33333370\",\r\n    backgroundColor:'#32cd32C0',\r\n    borderWidth:'thin',\r\n    borderStyle:'none solid solid none',\r\n    borderColor:'gray',\r\n  }\r\n  const adaptTextWrapperStyle = {paddingRight:16,display:'flex',width:'100%',alignItems:'center',justifyContent:'space-between'}\r\n\r\n\r\n  // {[`草地/芝\\xa0`,coloredGradeText(props.player.grass)]}\r\n  return(\r\n    <div style={{borderRadius:'8px',borderStyle:'solid',borderWidth:'thin',borderColor:'gray'}}>\r\n      <table {...tableStyle} >\r\n        <tbody>\r\n          <tr>\r\n            <td style={{ ...headerCellStyle ,borderRadius:\"8px 0 0 0\",fontWeight:700,fontSize:18}}>{t(\"场地适应\")}</td>\r\n            <td style={{ ...cellStyle }}><div style={adaptTextWrapperStyle}>{[`${t(\"芝\")}`,coloredGradeText(props.player.grass)]}</div></td>\r\n            <td style={{ ...cellStyle }}><div style={adaptTextWrapperStyle}>{[`${t(\"ダート\")}`,coloredGradeText(props.player.dirt)]}</div></td>\r\n            <td style={{ ...cellStyle }}>{`\\xa0`}</td>\r\n            <td style={{ ...cellStyle ,borderRadius:\"0 8px 0 0\",borderStyle:'none none solid none'}}>{`\\xa0`}</td>\r\n          </tr>\r\n          <tr>\r\n            <td style={{ ...headerCellStyle ,fontWeight:700,fontSize:18}}>{t(\"赛程适应\")}</td>\r\n            <td style={{ ...cellStyle }}><div style={adaptTextWrapperStyle}>{[`${t(\"短距離\")}`,coloredGradeText(props.player.shortDistance)]}</div></td>\r\n            <td style={{ ...cellStyle }}><div style={adaptTextWrapperStyle}>{[`${t(\"マイル\")}`,coloredGradeText(props.player.mile)]}</div></td>\r\n            <td style={{ ...cellStyle }}><div style={adaptTextWrapperStyle}>{[`${t(\"中距離\")}`,coloredGradeText(props.player.mediumDistance)]}</div></td>\r\n            <td style={{ ...cellStyle ,borderRadius:\"0 0 8px 0\",borderStyle:'none none solid none'}}><div style={adaptTextWrapperStyle}>{[`${t(\"長距離\")}`,coloredGradeText(props.player.longDistance)]}</div></td>\r\n          </tr>\r\n          <tr>\r\n            <td style={{ ...headerCellStyle ,borderRadius:\"0 0 0 8px\",borderStyle:'none solid none none',fontWeight:700,fontSize:18}}>{t(\"脚质适应\")}</td>\r\n            <td style={{ ...cellStyle ,borderStyle:'none solid none none'}}><div style={adaptTextWrapperStyle}>{[`${t(\"逃げ\")}`,coloredGradeText(props.player.escape)]}</div></td>\r\n            <td style={{ ...cellStyle ,borderStyle:'none solid none none'}}><div style={adaptTextWrapperStyle}>{[`${t(\"先行\")}`,coloredGradeText(props.player.leading)]}</div></td>\r\n            <td style={{ ...cellStyle ,borderStyle:'none solid none none'}}><div style={adaptTextWrapperStyle}>{[`${t(\"差し\")}`,coloredGradeText(props.player.insert)]}</div></td>\r\n            <td style={{ ...cellStyle ,borderRadius:\"0 0 8px 0\",borderStyle:'none none none none'}}><div style={adaptTextWrapperStyle}>{[`${t(\"追込\")}`,coloredGradeText(props.player.tracking)]}</div></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst GrowBox= (props)=>{\r\n  const tableStyle = {\r\n    width:\"100%\",\r\n    cellPadding:4,\r\n  }\r\n  const headerCellStyle = {\r\n    width:'20%',\r\n    fontSize: 18,\r\n    textAlign: 'center',\r\n    fontWeight: 600,\r\n    color:'#f5f5f5',\r\n    textShadow: \"0 2px #33333370\",\r\n    backgroundColor:'#32cd32C0',\r\n    borderWidth:'thin',\r\n    borderStyle:'none solid solid none',\r\n    borderColor:'gray',\r\n  }\r\n  const cellStyle = {\r\n    width:'20%',\r\n    height:'40px',\r\n    fontSize: 16,\r\n    textAlign: 'center',\r\n    fontWeight: 500,\r\n    borderWidth:'thin',\r\n    borderStyle:'none solid none none',\r\n    borderColor:'gray',\r\n  }\r\n\r\n  return(\r\n    <div style={{borderRadius:'8px',borderStyle:'solid',borderWidth:'thin',borderColor:'gray'}}>\r\n      <table {...tableStyle} >\r\n        <tbody>\r\n          <tr>\r\n            <th style={{ ...headerCellStyle ,borderRadius:\"8px 0 0 0\"}}>{t(\"スピード\")}</th>\r\n            <th style={{ ...headerCellStyle }}>{t(\"スタミナ\")}</th>\r\n            <th style={{ ...headerCellStyle }}>{t(\"パワー\")}</th>\r\n            <th style={{ ...headerCellStyle }}>{t(\"根性\")}</th>\r\n            <th style={{ ...headerCellStyle ,borderRadius:\"0 8px 0 0\",borderStyle:'none none solid none'}}>{t(\"賢さ\")}</th>\r\n          </tr>\r\n          <tr>\r\n            <td style={{ ...cellStyle ,borderRadius:\"0 0 0 8px\"}}>{props.player.speedGrow}</td>\r\n            <td style={{ ...cellStyle }}>{props.player.staminaGrow}</td>\r\n            <td style={{ ...cellStyle }}>{props.player.powerGrow}</td>\r\n            <td style={{ ...cellStyle }}>{props.player.gutsGrow}</td>\r\n            <td style={{ ...cellStyle ,borderRadius:\"0 0 8px 0\",borderStyle:'none none none none'}}>{props.player.wisdomGrow}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\nconst PlayerCard = (props)=>{\r\n  const history = useHistory();\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const player = props.data\r\n  const showName = props.name!==undefined?props.name:true\r\n  const showPlayerDetail = () => {\r\n    if(props.onSelect){\r\n      props.onSelect(player)\r\n    }else{\r\n      if(ua==='mo'){\r\n        history.push(`/player-detail/${player.id}/0`)\r\n      }else{\r\n        setIsModalVisible(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOk = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n\r\n      {showName?\r\n      <Card cover={<Image src={cdnServer+player.imgUrl} preview={false} onClick={showPlayerDetail} width={'100%'}></Image>}>\r\n        <Card.Meta title={t(player.name)} ></Card.Meta>\r\n        <Card.Meta title={t(player.charaName)} ></Card.Meta>\r\n      </Card>:\r\n      <Image src={cdnServer+player.imgUrl} preview={false} onClick={showPlayerDetail} width={'100%'}></Image>\r\n      }\r\n      <Modal visible={isModalVisible} onOk={handleOk} onCancel={handleCancel} footer={null} width={800} >\r\n        <PlayerDetail playerId={player.id} isNur={false}></PlayerDetail>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\nconst PlayerTable = (props)=>{\r\n  const adaptFilters = [\r\n    { text: 'A', value: 'A' },\r\n    { text: 'B', value: 'B' },\r\n    { text: 'C', value: 'C' },\r\n    { text: 'D', value: 'D' },\r\n    { text: 'E', value: 'E' },\r\n    { text: 'F', value: 'F' },\r\n    { text: 'G', value: 'G' },\r\n    ]\r\n  const growFilters = [\r\n    { text: '20%', value: '+20%' },\r\n    { text: '10%', value: '+10%' },\r\n    { text: '0%', value: '+0%' },\r\n    ]\r\n  const rares = {\r\n    '1':'R',\r\n    '2':'SR',\r\n    '3':'SSR'\r\n  }\r\n  const titles={\r\n    \"芝\":\"grass\",\r\n    \"ダート\":\"dirt\",\r\n    \"短距離\":\"shortDistance\",\r\n    \"マイル\":\"mile\",\r\n    \"中距離\":\"mediumDistance\",\r\n    \"長距離\":\"longDistance\",\r\n    \"逃げ\":\"escape\",\r\n    \"先行\":\"leading\",\r\n    \"差し\":\"insert\",\r\n    \"追込\":\"tracking\",\r\n    \"スピード\":\"speedGrow\",\r\n    \"スタミナ\":\"staminaGrow\",\r\n    \"パワー\":\"powerGrow\",\r\n    \"根性\":\"gutsGrow\",\r\n    \"賢さ\":\"wisdomGrow\"\r\n  }\r\n  const getColumn = (text,type)=>{\r\n    if (type==='adapt'){\r\n      return { title: t(text), dataIndex: titles[text], key: titles[text], width:80,\r\n        render: (value) => coloredGradeText(value),\r\n        filters:adaptFilters,onFilter: (value, record) => record[titles[text]] === value, }\r\n    }else if(type==='grow'){\r\n      return { title: t(text), dataIndex: titles[text], key: titles[text], width:100,\r\n        render: (value) => coloredGradeText(value),\r\n        filters:growFilters,onFilter: (value, record) => record[titles[text]] === value, }\r\n    }\r\n  }\r\n  const columns = [{\r\n    title: \"角色\",\r\n    dataIndex: \"imgUrl\",\r\n    key: \"imgUrl\",\r\n    width:100,\r\n    render: (text,record) => <PlayerCard data={record} onSelect={props.onSelect} name={false}></PlayerCard>,\r\n  },\r\n  { title: \"称号\", dataIndex: \"name\", key: \"name\", render: (value) => t(value) },\r\n  { title: \"角色名\", dataIndex: \"charaName\", key: \"charaName\", render: (value) => t(value) },\r\n  { title: \"稀有度\", dataIndex: \"rare\", key: \"rare\", render: (value) => rares[value] },\r\n  getColumn(\"芝\",'adapt'),\r\n  getColumn(\"ダート\",'adapt'),\r\n  getColumn(\"短距離\",'adapt'),\r\n  getColumn(\"マイル\",'adapt'),\r\n  getColumn(\"中距離\",'adapt'),\r\n  getColumn(\"長距離\",'adapt'),\r\n  getColumn(\"逃げ\",'adapt'),\r\n  getColumn(\"先行\",'adapt'),\r\n  getColumn(\"差し\",'adapt'),\r\n  getColumn(\"追込\",'adapt'),\r\n  getColumn(\"スピード\",'grow'),\r\n  getColumn(\"スタミナ\",'grow'),\r\n  getColumn(\"パワー\",'grow'),\r\n  getColumn(\"根性\",'grow'),\r\n  getColumn(\"賢さ\",'grow'),\r\n]\r\n\r\nreturn <Table columns={columns} dataSource={props.list.sort((a,b)=>b.rare-a.rare)} pagination={false} rowKey={\"id\"} scroll={{ y: window.innerHeight-200 }} />\r\n}\r\nexport {PlayerDetail,PlayerCard,PlayerTable}\r\n\r\n","import React,{useState} from 'react';\nimport db from '../db.js'\nimport t from '../components/t.js'\nimport { Divider,Row,Col,Button,Table,Image,Card} from 'antd';\n\n\nimport {PlayerCard,PlayerTable} from '../components/player-detail.js'\n// const CheckboxGroup = Checkbox.Group\n\n// todo 提取出来\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby@master/public/'\n\n\n//todo filter\nclass Player extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      list:props.playerList,\n      isTable:false,\n    }\n  }\n  componentDidUpdate(prevProps){\n    if(this.props.playerList !== prevProps.playerList){\n      this.setState({list:this.props.playerList})\n    }\n  }\n  render(){\n    return(\n      <Row justify=\"space-around\">\n        <Button onClick={()=>this.setState({isTable:!this.state.isTable})}>\n          {this.state.isTable?\"列表\":\"表格\"}</Button>\n        <Col span={22}>\n          {\n            this.state.isTable?\n            <PlayerTable list={this.state.list} onSelect={this.props.onSelect}></PlayerTable>\n            :['3','2','1'].map(rare=>{\n              let list = this.state.list.filter(item=>item.rare===rare)\n              return list.length?<Row gutter={[16,16]} key={rare}>\n              <Divider>{rare} {t('星')}</Divider>\n              {this.state.list.filter(item=>item.rare===rare).map(player=>\n                <Col xxl={2} lg={3} sm={6} xs={6} key={player.id}>\n                  <PlayerCard data={player} onSelect={this.props.onSelect}></PlayerCard>\n                </Col>)\n              }\n            </Row>:null\n            })\n          }\n        </Col>\n      </Row>\n    )\n  }\n}\nPlayer.defaultProps={\n  playerList:db.get('players').value()\n}\n\nexport default Player\n","import React, { useState } from 'react';\r\nimport { Divider, Row, Col, Image, Modal, Button, Checkbox, Tooltip, Input } from 'antd';\r\n\r\nimport db from '../db.js'\r\nimport t from '../components/t.js'\r\n\r\n\r\nimport { SupportCard } from '../components/support-detail.js'\r\nimport { SkillCheckbox, SkillList } from '../components/skill-detail.js'\r\nconst CheckboxGroup = Checkbox.Group\r\nconst Search = Input.Search\r\n\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n\r\n\r\nclass Support extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      list: props.supportList,\r\n      chooseMode: false,\r\n      showMode: false,\r\n      chosenList: db.get('mySupports').value() || [],\r\n      effectList: [],\r\n      typeList: [],\r\n      skillList: []\r\n    }\r\n    this.effects = db.get('effects').value()\r\n    this.effectOptions = Object.keys(this.effects)\r\n      .map(key => { return { label: t(this.effects[key].name), value: key } })\r\n    this.typeOptions = ['スピード', 'スタミナ', 'パワー', '根性', '賢さ', '友人'].map(item => ({ label: t(item), value: item }))\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.supportList !== prevProps.supportList) {\r\n      this.setState({ list: this.props.supportList })\r\n    }\r\n  }\r\n  changeChooseMode = () => {\r\n    this.setState({ chooseMode: !this.state.chooseMode })\r\n    this.setState({ showMode: !this.state.chooseMode })\r\n  }\r\n  changeShowMode = () => {\r\n    this.setState({ showMode: !this.state.showMode })\r\n  }\r\n  onSelect = (item) => {\r\n    let index = this.state.chosenList.indexOf(item.id)\r\n    if (index === -1) {\r\n      this.state.chosenList.push(item.id)\r\n    } else {\r\n      this.state.chosenList.splice(index, 1)\r\n    }\r\n    db.update('mySupports', this.state.chosenList).write()\r\n    this.setState({})\r\n  }\r\n  onSupportCheckboxChange = (effectList) => {\r\n    this.updateSupport({ effectList })\r\n    this.setState({ effectList: effectList })\r\n  }\r\n\r\n  onSkillCheckboxUpdate = (skillList) => {\r\n    this.updateSupport({ skillList })\r\n    this.setState({ skillList: skillList })\r\n  }\r\n  onTypeListChange = (typeList) => {\r\n    this.updateSupport({ typeList })\r\n    this.setState({ typeList })\r\n  }\r\n  updateSupport = ({ effectList, skillList, eventIdList = [], typeList }) => {\r\n    let tempList = this.props.supportList\r\n    if (effectList?.length) {\r\n      tempList = tempList.filter(support => {\r\n        let flag = 0;\r\n        effectList.forEach(value => {\r\n          support.effects && support.effects.forEach(effect => {\r\n            if (effect.type == value) {\r\n              flag += 1\r\n            }\r\n          })\r\n        })\r\n        return flag == effectList.length\r\n      })\r\n    }\r\n    if (skillList?.length) {\r\n      tempList = tempList.filter(support => {\r\n        let flag = 0;\r\n        support.skillList.forEach(skillId => {\r\n          if (skillList.indexOf(skillId) !== -1) {\r\n            return flag = 1;\r\n          }\r\n        })\r\n        return flag\r\n      })\r\n    }\r\n    if (eventIdList?.length) {\r\n      tempList = tempList.filter(support => {\r\n        let flag = 0;\r\n        support.eventList.forEach(eventId => {\r\n          if (eventIdList.indexOf(eventId) !== -1) {\r\n            return flag = 1;\r\n          }\r\n        })\r\n        return flag\r\n      })\r\n    }\r\n    if (typeList?.length) {\r\n      tempList = tempList.filter(support => {\r\n        let flag = 0;\r\n        if (typeList.indexOf(support.type) !== -1) {\r\n          return flag = 1;\r\n        }\r\n        return flag\r\n      })\r\n    }\r\n    this.setState({ list: tempList })\r\n  }\r\n\r\n  onSearch = (searchText) => {\r\n    const allEventList = db.get('events').value();\r\n    const eventIdList = allEventList.filter(event => {\r\n      let jsonEvent = JSON.stringify(event)\r\n      if (jsonEvent.indexOf(searchText) !== -1) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    }).reduce((list, event) => {\r\n      list.push(event.id)\r\n      return list\r\n    }, [])\r\n    this.updateSupport(this.state.effectList, this.state.skillList, eventIdList)\r\n  };\r\n\r\n  render() {\r\n    const headerStyle = {\r\n      backgroundColor: '#1e90ffA0',\r\n      height: 48,\r\n      borderRadius: 5,\r\n      margin: 1,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    }\r\n    const headerTextStyle = {\r\n      fontSize: 18,\r\n      textAlign: 'center',\r\n      fontWeight: 600,\r\n      color: '#f5f5f5',\r\n      textShadow: \"0 2px #33333370\",\r\n    }\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', paddingTop: 4 }}>\r\n        <div style={{ maxWidth: 1200, maxHeight: window.innerHeight - 104 }}>\r\n          <Row justify=\"space-around\">\r\n            {this.props.filter &&\r\n              <Col span={6}><div style={{ ...headerStyle }}>\r\n                <text style={{ ...headerTextStyle }}>{t('筛选')}</text></div>\r\n              </Col>}\r\n            <Col span={18}>\r\n              <div style={{ ...headerStyle }}>\r\n                <text style={{ ...headerTextStyle }}>{t('支援卡列表')}</text>\r\n              </div>\r\n            </Col>\r\n            {this.props.filter &&\r\n              <Col span={6}>\r\n                <div style={{\r\n                  overflowY: 'scroll', display: 'flex',\r\n                  flexDirection: 'column', overflowX: 'hidden',\r\n                  maxHeight: window.innerHeight - 104 - 78, padding: 4\r\n                }}>\r\n                  <Button onClick={this.changeShowMode}>{t('高亮我的卡组')}</Button>\r\n                  <Button onClick={this.changeChooseMode}>{t('配置卡组')}</Button>\r\n                  {this.state.chooseMode && <Button onClick={this.changeChooseMode} type='primary'>{t('配置完成')}</Button>}\r\n                  <Search placeholder={t(\"输入关键词\")} enterButton={t(\"搜索\")} size=\"middle\"\r\n                    style={{ width: '100%' }} onSearch={this.onSearch} />\r\n                  <Divider style={{ margin: 4 }}>{t('类型')}</Divider>\r\n                  <CheckboxGroup options={this.typeOptions} value={this.state.typeList}\r\n                    onChange={this.onTypeListChange} />\r\n                  <Divider style={{ margin: 4 }}>{t('技能')}</Divider>\r\n                  <SkillCheckbox onUpdate={this.onSkillCheckboxUpdate}\r\n                    checkOnly={true} needId={true}></SkillCheckbox>\r\n                  <Divider style={{ margin: 4 }}>{t('育成效果')}</Divider>\r\n                  <CheckboxGroup options={this.effectOptions} value={this.state.effectList}\r\n                    onChange={this.onSupportCheckboxChange} />\r\n                </div>\r\n              </Col>}\r\n\r\n\r\n            <Col span={18}>\r\n              <div style={{\r\n                overflowY: 'scroll', overflowX: 'hidden',\r\n                maxHeight: window.innerHeight - 104 - 78, paddingRight: 16\r\n              }}>\r\n                {\r\n                  ['SSR', 'SR', 'R'].map(rare => {\r\n                    let list = this.state.list.filter(item => item.rare === rare)\r\n                    return list.length ? <Row gutter={[16, 16]} key={rare}>\r\n                      <Divider>{rare}</Divider>\r\n                      {list.map(support =>\r\n                        <Col lg={4} xs={6} key={support.id}\r\n                          className={this.state.showMode && this.state.chosenList.indexOf(support.id) === -1 ? 'un-chosen-card' : 'chosen-card'}>\r\n                          <SupportCard data={support} onSelect={this.state.chooseMode ? this.onSelect : this.props.onSelect}\r\n                            chooseMode={this.props.chooseMode}></SupportCard>\r\n                        </Col>)}\r\n                    </Row> : null\r\n                  })\r\n                }\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSupport.defaultProps = {\r\n  supportList: db.get('supports').value(),\r\n  filter: true\r\n}\r\n\r\nexport default Support\r\n","import React from 'react';\r\n// import {useState} from 'react';\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from '../components/t.js'\r\n\r\nimport { List,Popover,Button } from 'antd';\r\n\r\nconst ua = dbL.get('ua').value();\r\n\r\nconst BuffButton = (props)=>{\r\n  return(\r\n    <Popover\r\n    trigger={ua==='mo'?'click':'hover'}\r\n    content={<BuffList></BuffList>}>\r\n      <Button>Buff</Button>\r\n    </Popover>\r\n  )\r\n}\r\nconst BuffList = (props)=>{\r\n  const buffs = db.get('buffs').value()\r\n  const cellStyle = {\r\n    // width:'20%',\r\n    height:'32px',\r\n    fontSize: 16,\r\n    textAlign: 'flex-start',\r\n    paddingLeft:16,\r\n    fontWeight: 500,\r\n    borderWidth:'thin',\r\n    borderStyle:'solid solid solid solid',\r\n    borderColor:'gray',\r\n  }\r\n  return(\r\n    <table>\r\n      <tbody>\r\n      {buffs.map(buff=><tr key={buff.name}>\r\n        <td style={{...cellStyle}}>{t(buff.name)}</td>\r\n        <td style={{...cellStyle}}>{t(buff.describe)}</td>\r\n      </tr>)}\r\n      </tbody>\r\n    </table>\r\n    )\r\n}\r\nexport {BuffButton,BuffList}\r\n","import React,{useEffect, useState} from 'react';\r\nimport shortid from 'shortid'\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from '../components/t.js'\r\nimport axios from \"axios\";\r\n\r\nimport { Divider,Row,Col,Modal,Button,Tag,message, Popover,Popconfirm,Checkbox} from 'antd';\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby@master/public/'\r\n\r\nconst MyDecks = (props)=>{\r\n  const [decks,setDecks] = useState(dbL.get('myDecks').value())\r\n  // 卡组相关操作\r\n  const saveDeck = (deck)=>{\r\n    let tmpDeck = {\r\n      imgUrls:[],\r\n      supportsId:[],\r\n      tags:[],\r\n    }\r\n    if(props.player.id){\r\n      tmpDeck.playerId = props.player.id\r\n      tmpDeck.imgUrls.push(props.player.imgUrl)\r\n    }\r\n    [0,1,2,3,4,5].forEach(index=>{\r\n      if(props.supports[index]&&props.supports[index].id){\r\n        tmpDeck.imgUrls.push(props.supports[index].imgUrl)\r\n        tmpDeck.supportsId.push(props.supports[index].id)\r\n      }else{\r\n        tmpDeck.supportsId.push(null)\r\n      }\r\n    })\r\n    if(deck){\r\n      //update\r\n      dbL.get('myDecks').find({id:deck.id}).assign(tmpDeck).write()\r\n    }else{\r\n      //\r\n      tmpDeck.id = shortid.generate()\r\n      dbL.get('myDecks').push(tmpDeck).write()\r\n    }\r\n    setDecks([...dbL.get('myDecks').value()])\r\n  }\r\n\r\n  const deleteDeck = (deck)=>{\r\n    dbL.get('myDecks').remove({id:deck.id}).write()\r\n    setDecks([...dbL.get('myDecks').value()])\r\n  }\r\n  const shareDeck = async (deck) =>{\r\n    //判断表格\r\n    // if(deck.playerId)\r\n    const formData = {\r\n      ...deck,\r\n      id:deck.playerId+deck.supportsId.sort((a,b)=>a.localeCompare(b)).join(\"\")\r\n    }\r\n    console.log(formData)\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/addDeck\", formData);\r\n    const data = res.data\r\n    data&&message.info(data.msg);\r\n\r\n  }\r\n\r\n  const labels = ['短距離','マイル','中距離','長距離','ダート','逃げ','先行','差し','追込',\r\n                  '高速度','高耐力','高力量','高根性 ','高智力','竞技场前排','萌新之友']\r\n  const onChangeTag =  (values,deck)=>{\r\n    dbL.get('myDecks').find({id:deck.id}).assign({tags:values}).write()\r\n    setDecks([...dbL.get('myDecks').value()])\r\n  }\r\n\r\n  return <Popover width={'100%'}  overlayStyle={{maxHeight:800,overflow:'auto'}}\r\n  content={\r\n    <>\r\n          <Button onClick={()=>saveDeck()}>{t('保存为新卡组')}</Button>\r\n          {decks.map(deck=>\r\n            <>\r\n            <Row>\r\n              <Checkbox.Group options={labels} defaultValue={deck.tags||[]}\r\n                    onChange={(values)=>onChangeTag(values,deck)}/>\r\n            </Row>\r\n            <Row key={deck.id}>\r\n              {deck.imgUrls.map(imgUrl=>\r\n                <Col span={3} key={imgUrl}>\r\n                  <img src={cdnServer+imgUrl} alt={imgUrl} width={'100'}></img>\r\n                </Col>\r\n              )}\r\n              <Col span={3}>\r\n                <Button type=\"primary\" onClick={()=>props.loadDeck(deck)}>{t('读取卡组')}</Button>\r\n                <Popconfirm title={t(\"确认覆盖？\")} onConfirm={()=>saveDeck(deck)}>\r\n                  <Button danger type=\"dashed\">{t('覆盖卡组')}</Button>\r\n                </Popconfirm>\r\n                <Popconfirm title={t(\"确认删除？\")} onConfirm={()=>deleteDeck(deck)}>\r\n                  <Button danger type=\"dashed\">{t('删除卡组')}</Button>\r\n                </Popconfirm>\r\n                <Popconfirm title={t(\"确认分享？\")} onConfirm={()=>shareDeck(deck)}>\r\n                  <Button>分享卡组</Button>\r\n                </Popconfirm>\r\n              </Col>\r\n            </Row>\r\n          </>)}\r\n        </>\r\n      }><Button>{t('我的卡组')}</Button>\r\n  </Popover>\r\n}\r\n\r\nconst RecommendDecks = (props)=>{\r\n  // const [recommendDecks,setRecommendDecks] = useState(res.data||[])\r\n  const [recommendDecks,setRecommendDecks] = useState([])\r\n  const [playerId,setPlayerId] = useState('')\r\n  const searchDeck = async () =>{\r\n    if(playerId!==props.player.id){\r\n      const formData = props.player? {playerId:props.player.id}:{}\r\n      const res = await axios.post(\"https://urarawin.com/api/sqlite/searchDeck\",formData)\r\n      setRecommendDecks(res.data||[])\r\n      setPlayerId(props.player.id)\r\n    }\r\n  }\r\n  const deleteDeck = async (deck)=>{\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/deleteDeck\",deck)\r\n    searchDeck()\r\n  }\r\n  return <Popover width={'100%'} onVisibleChange = {searchDeck} overlayStyle={{maxHeight:800,overflow:'auto'}}\r\n  content={\r\n    recommendDecks.map(deck=>\r\n      <>\r\n        <Row>\r\n          {deck.tags&&deck.tags.map(tag=><Tag>{tag}</Tag>)}\r\n        </Row>\r\n        <Row key={deck.id}>\r\n          {deck.imgUrls.map(imgUrl=>\r\n            <Col span={3} key={imgUrl}>\r\n              <img src={cdnServer+imgUrl} alt={imgUrl} width={'100'}></img>\r\n            </Col>\r\n          )}\r\n          <Col span={3}>\r\n            <Button type=\"primary\" onClick={()=>props.loadDeck(deck)}>{t('读取卡组')}</Button>\r\n            {/* <Button type=\"primary\" onClick={()=>deleteDeck(deck)}>{t('删除卡组')}</Button> */}\r\n          </Col>\r\n        </Row>\r\n      </>\r\n        )\r\n    }>\r\n      <Button>{t('推荐卡组')}</Button>\r\n  </Popover>\r\n}\r\n\r\nexport{MyDecks,RecommendDecks}\r\n","import React,{useState} from 'react';\r\nimport shortid from 'shortid'\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from '../components/t.js'\r\nimport axios from \"axios\";\r\n\r\nimport { Divider,Row,Col,Modal,Button,Drawer,message, Popover,Popconfirm,Tooltip} from 'antd';\r\nimport {EditOutlined} from '@ant-design/icons'\r\n\r\nimport ScrollBars from 'react-custom-scrollbars'\r\n\r\nimport {EventList} from '../components/event.js'\r\nimport {SkillList} from '../components/skill-detail.js'\r\nimport {BuffButton} from '../components/buff.js'\r\nimport {RaceSchedule,RaceTimeline,RaceCheckbox} from '../components/race.js'\r\nimport {MyDecks,RecommendDecks} from '../components/deck.js'\r\n\r\nimport GridLayout from 'react-grid-layout';\r\nimport 'react-grid-layout/css/styles.css'\r\nimport Race from './race.js'\r\nimport Player from './player.js'\r\nimport Support from './support.js'\r\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\r\n\r\n\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby@master/public/'\r\n\r\n\r\nconst Nurturing = () =>{\r\n  const [needSelect,setNeedSelect] = useState(false)\r\n  const [isPlayerVisible, setIsPlayerVisible] = useState(false);\r\n\r\n  const [isSupportVisible, setIsSupportVisible] = useState(false);\r\n  const [supportIndex, setSupportIndex] = useState(1);\r\n\r\n\r\n  const selected = dbL.get('selected').value()\r\n  const [supports, setSupports] = useState(selected.supports);\r\n  const [player, setPlayer] = useState(selected.player);\r\n\r\n  const races = db.get('races').value()\r\n  const [raceFilterCondition,setRaceFilterCondition] = useState(selected.raceFilterCondition||{\r\n    distanceType:[],\r\n    grade:[],\r\n    ground:[]})\r\n  const [filterRace,setFilterRace] = useState(selected.filterRace||{})\r\n\r\n  const showPlayer = () => {\r\n    setIsPlayerVisible(true);\r\n  };\r\n  const closePlayer = () => {\r\n    setIsPlayerVisible(false);\r\n  };\r\n  const handleSelectPlayer = (data)=>{\r\n    setIsPlayerVisible(false);\r\n    setPlayer(data)\r\n    // save player\r\n    selected.player = data\r\n    dbL.get('selected').assign(selected).write()\r\n  }\r\n\r\n  const showSupport = (index) => {\r\n    setNeedSelect(true)\r\n    setIsSupportVisible(true);\r\n    setSupportIndex(index)\r\n  };\r\n  const showSupport2 = (index) => {\r\n    setNeedSelect(false)\r\n    setIsSupportVisible(true);\r\n    setSupportIndex(index)\r\n  };\r\n\r\n  const closeSupport = () => {\r\n    setIsSupportVisible(false);\r\n  };\r\n  const handleSelectSupport = (data)=>{\r\n    let newData= {}\r\n    newData[supportIndex] = data\r\n    setSupports(Object.assign({},supports,newData))\r\n    setIsSupportVisible(false);\r\n\r\n    // save\r\n    selected.supports[supportIndex] = data\r\n    dbL.get('selected').assign(selected).write()\r\n  }\r\n\r\n  const loadDeck = (deck)=>{\r\n    selected.supports={0:{},1:{},2:{},3:{},4:{},5:{}}\r\n    selected.player={}\r\n    if(deck.playerId){\r\n      selected.player = db.get('players').find({id:deck.playerId}).value()\r\n    }\r\n    setPlayer(selected.player)\r\n    deck.supportsId.forEach((id,index)=>{\r\n      if(id){\r\n        selected.supports[index]=db.get('supports').find({id:id}).value()\r\n      }\r\n    })\r\n    setSupports({...selected.supports})\r\n    dbL.get('selected').assign(selected).write()\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // race checkbox发生变化\r\n  const onChangeRace = (filterCondition)=>{\r\n    setRaceFilterCondition(filterCondition)\r\n    //根据条件过滤\r\n    let tmpRaceList = Object.values(filterCondition).some(f => f.length > 0)\r\n      ? Object.entries(filterCondition)\r\n        .filter(([key, filters]) => filters.length > 0)\r\n        .reduce((result, [key, filters]) => result.filter(race => filters.includes(race[key])), races)\r\n      : [];\r\n    //过滤后整理成 dataNum:[raceId]\r\n    let tmpFilterRace = {}\r\n      for(let race of tmpRaceList){\r\n        if(tmpFilterRace[race.dateNum]){\r\n          tmpFilterRace[race.dateNum].push(race.id)\r\n        }else{\r\n          tmpFilterRace[race.dateNum]=[race.id]\r\n        }\r\n      }\r\n    //更新state\r\n    setFilterRace(tmpFilterRace)\r\n    selected.raceFilterCondition = filterCondition\r\n    selected.filterRace = tmpFilterRace\r\n    dbL.get('selected').assign({...selected}).write()\r\n  }\r\n\r\n  const useViewport = () => {\r\n    const [width, setWidth] = React.useState(window.innerWidth);\r\n    const [height,setHeight] = React.useState(window.innerHeight);\r\n    React.useEffect(() => {\r\n      const handleWindowResize = () => {\r\n        setHeight(window.innerHeight)\r\n        setWidth(window.innerWidth)\r\n      };\r\n      window.addEventListener(\"resize\", handleWindowResize);\r\n      return () => window.removeEventListener(\"resize\", handleWindowResize);\r\n    }, []);\r\n    // console.log('currentWidth::',height);\r\n    return {height,width};\r\n  };\r\n\r\n  const dynamicContentHeight = useViewport().height -128\r\n  // 宽度0.3 高度0.5 取较小值\r\n  const dynamicCardHeight = Math.min(Math.floor(dynamicContentHeight / 2),Math.floor(useViewport().width * 0.3))\r\n  const dynamicCardWidth = Math.floor(dynamicCardHeight * 3 / 4)\r\n  const dynamicCardBoxWidth = dynamicCardWidth * 3\r\n\r\n  const dynamicRowHeight = Math.floor((useViewport().height -128-40)/18)\r\n\r\n  const layoutWithBlank=[\r\n    {i: 'a', x: 0, y: 0, w: 2, h: 2},\r\n    {i: 'b', x: 2, y: 0, w: 7, h: 2},\r\n    {i: 'c', x: 0, y: 2, w: 9, h: 7},\r\n    {i: 'd', x: 0, y: 10, w: 4, h: 4},\r\n    {i: 'e', x: 4, y: 10, w: 5, h: 7},\r\n    {i: 'f', x: 0, y: 14, w: 4, h: 3},\r\n    // {i: 'w', x: 5, y: 10, w: 6, h: 7},\r\n    {i: 's0', x: 17, y: 0, w: 5, h: 8},\r\n    {i: 's1', x: 22, y: 0, w: 5, h: 8},\r\n    {i: 's2', x: 27, y: 0, w: 5, h: 8},\r\n    {i: 's3', x: 17, y: 9, w: 5, h: 8},\r\n    {i: 's4', x: 22, y: 9, w: 5, h: 8},\r\n    {i: 's5', x: 27, y: 9, w: 5, h: 8},\r\n  ]\r\n  const layoutWithoutBlank=[\r\n    {i: 'a', x: 0, y: 0, w: 2, h: 2},\r\n    {i: 'b', x: 2, y: 0, w: 9, h: 2},\r\n    {i: 'c', x: 0, y: 2, w: 11, h: 7},\r\n    {i: 'd', x: 0, y: 10, w: 5, h: 4},\r\n    {i: 'e', x: 5, y: 10, w: 6, h: 7},\r\n    {i: 'f', x: 0, y: 14, w: 5, h: 3},\r\n    // {i: 'w', x: 5, y: 10, w: 6, h: 7},\r\n    {i: 's0', x: 11 , y: 0, w: 7, h: 8},\r\n    {i: 's1', x: 18, y: 0, w: 7, h: 8},\r\n    {i: 's2', x: 25, y: 0, w: 7, h: 8},\r\n    {i: 's3', x: 11, y: 9, w: 7, h: 8},\r\n    {i: 's4', x: 18, y: 9, w: 7, h: 8},\r\n    {i: 's5', x: 25, y: 9, w: 7, h: 8},\r\n  ]\r\n  const originalLayout = dbL.get('layout').value()||layoutWithoutBlank\r\n  const [layout,setLayout]=useState(originalLayout)\r\n  const onLayoutChange=(layout)=> {\r\n    /*eslint no-console: 0*/\r\n    dbL.set('layout',layout).write()\r\n    setLayout(layout)\r\n    // onLayoutChange(layout); // updates status display\r\n  }\r\n  const panelStyle = {\r\n    borderRadius:16,\r\n    backgroundColor:'white',\r\n  }\r\n  const headStyle = {\r\n    width:'100%',\r\n    textAlign:'center',\r\n    backgroundColor:'#ccc',\r\n    cursor:'move'\r\n  }\r\n  const pBodyStyle={\r\n    height:'calc(100% - 22px)'\r\n  }\r\n  return(<>\r\n    <GridLayout cols={32} layout={layout}\r\n    draggableCancel='.panel-title' draggableHandle='.panel-heading'\r\n      rowHeight={dynamicRowHeight} width={useViewport().width-10}\r\n      onLayoutChange={onLayoutChange}>\r\n\r\n      <div key='a' style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('角色')}</div>\r\n          {player.id&&\r\n            <img src={cdnServer+player.imgUrl} alt={player.imgUrl}\r\n            style={{...pBodyStyle}}  onClick={showPlayer}>\r\n          </img>}\r\n      </div>\r\n      <div key='b' style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('操作')}</div>\r\n        <Button className='add-player' type={'primary'} onClick={showPlayer}>{t('选择马娘')}</Button>\r\n        <Button onClick={showSupport2}>{t('支援卡查询')}</Button>\r\n        <BuffButton/>\r\n        <Popover content={<RaceCheckbox onChange={onChangeRace} raceFilterCondition={raceFilterCondition}></RaceCheckbox>}>\r\n          <Button>{t('比赛')}</Button>\r\n        </Popover>\r\n        <MyDecks player={player} supports={supports} loadDeck={loadDeck}></MyDecks>\r\n        <RecommendDecks player={player} loadDeck={loadDeck}></RecommendDecks>\r\n\r\n\r\n        <Button onClick={()=>setLayout(layoutWithBlank)}>{t('初始化布局(有留白)')}</Button>\r\n        <Button onClick={()=>setLayout(layoutWithoutBlank)}>{t('初始化布局(无留白)')}</Button>\r\n      </div>\r\n      <div key='c'  style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('事件')}</div>\r\n        <ScrollBars autoHide={true} style={{...pBodyStyle}}>\r\n          {/* <p>{player.id}</p> */}\r\n          <EventList eventList={player.eventList||[]} pid={player.id}></EventList>\r\n        </ScrollBars>\r\n      </div>\r\n      <div key='d' style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('技能')}</div>\r\n        <ScrollBars autoHide={true} style={{...pBodyStyle}}>\r\n          <SkillList skillList={player.skillList||[]} isNur={true}></SkillList>\r\n        </ScrollBars>\r\n      </div>\r\n      <div key='e' style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('比赛')}</div>\r\n        <ScrollBars autoHide={true} style={{...pBodyStyle}}>\r\n          <RaceTimeline raceList={player.raceList||[]} filterRace={filterRace}></RaceTimeline>\r\n        </ScrollBars>\r\n      </div>\r\n      <div key='f' style={{...panelStyle}}>\r\n        <div className='panel-heading' style={{...headStyle}}>{t('隐藏事件')}</div>\r\n        <ScrollBars autoHide={true} style={{...pBodyStyle}}>\r\n          <EventList eventList={player.hideEvent||[]} pid={player.id} type='all'></EventList>\r\n        </ScrollBars>\r\n      </div>\r\n        {[0,1,2,3,4,5].map(index=>{\r\n          let support = supports[index];\r\n          if(support.id){\r\n            return (\r\n            <div key={`s${index}`} style={{...panelStyle}}>\r\n              <div className='panel-heading' style={{...headStyle}}>\r\n                <span className='panel-title' onClick={()=>showSupport(index)} style={{cursor:'pointer'}}>{t('选择支援卡')}</span>\r\n              </div>\r\n              <ScrollBars  autoHide={true} style={{...pBodyStyle}}>\r\n                <div style={{display:'flex'}}>\r\n                  <img style={{width:'26%',height:'39%'}} src={cdnServer+support.imgUrl} alt={support.imgUrl}></img>\r\n                  <div style={{flex:'1 1 auto'}}>\r\n                    <EventList eventList={supports[index].eventList} pid={supports[index].id} ></EventList>\r\n                  </div>\r\n                </div>\r\n                <Divider style={{margin:'4px 0',background:'rgba(255,255,255,0.6)'}}>{t(\"培训技能\")}</Divider>\r\n                <SkillList skillList={supports[index].possessionSkill} isNur={true}></SkillList>\r\n                <Divider style={{margin:'4px 0',background:'rgba(255,255,255,0.6)'}}>{t(\"事件技能\")}</Divider>\r\n                <SkillList skillList={supports[index].trainingEventSkill} isNur={true}></SkillList>\r\n              </ScrollBars>\r\n            </div>)\r\n          }else{\r\n            return (\r\n              <div key={`s${index}`} style={{...panelStyle}}>\r\n                <Button onClick={()=>showSupport(index)}>{t('选择支援卡')}</Button>\r\n              </div>\r\n            )\r\n          }\r\n        })}\r\n\r\n    </GridLayout>\r\n      <Modal visible={isPlayerVisible} onOk={closePlayer} onCancel={closePlayer} width={'80%'}>\r\n        <Player onSelect={handleSelectPlayer}></Player>\r\n      </Modal>\r\n      <Modal visible={isSupportVisible} onOk={closeSupport} onCancel={closeSupport} width={'80%'}>\r\n        <Support onSelect={needSelect?handleSelectSupport:null}></Support>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Nurturing\r\n\r\n\r\n","import React,{useState} from 'react';\r\nimport { Divider,Row,Col} from 'antd';\r\n\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from '../components/t.js'\r\n\r\nimport {SkillButton,SkillCheckbox} from '../components/skill-detail.js'\r\n// const { Search } = Input\r\n// const cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\nconst ua = dbL.get('ua').value();\r\n\r\nconst Skill = (props) =>{\r\n  // 所有技能列表\r\n  const allSkillList = db.get('skills').orderBy('db_id').value()\r\n\r\n  const [skillList,setSkillList] = useState(allSkillList)\r\n\r\n  // init supportMode\r\n  localStorage.getItem('supportMode')===null&&localStorage.setItem('supportMode',0)\r\n\r\n  const rareLabel={'ノーマル':'普通','レア':'金色 稀有','固有':'独特'}\r\n\r\n  const headerStyle = {\r\n    backgroundColor:'#1e90ffA0',\r\n    height:48,\r\n    borderRadius:5,\r\n    margin:1,\r\n    display:'flex',\r\n    alignItems:'center',\r\n    justifyContent:'center'\r\n  }\r\n  const headerTextStyle = {\r\n    fontSize: 18,\r\n    textAlign: 'center',\r\n    fontWeight: 600,\r\n    color:'#f5f5f5',\r\n    textShadow: \"0 2px #33333370\",\r\n  }\r\n\r\n  const onSkillCheckboxUpdate = (skillList)=>{\r\n    setSkillList(skillList)\r\n  }\r\n\r\n  const useViewport = () => {\r\n    const [width, setWidth] = React.useState(window.innerWidth);\r\n    const [height,setHeight] = React.useState(window.innerHeight);\r\n    React.useEffect(() => {\r\n      const handleWindowResize = () => setHeight(window.innerHeight);\r\n      window.addEventListener(\"resize\", handleWindowResize);\r\n      return () => window.removeEventListener(\"resize\", handleWindowResize);\r\n    }, []);\r\n    return {height};\r\n  };\r\n\r\n  const dynamicListHeight = useViewport().height - 104 - 78;\r\n\r\n  return(<>\r\n    <div style={{display:'flex',justifyContent:'center',paddingTop:4}}>\r\n      <div style={{maxWidth:1200}}>\r\n        <Row>\r\n          <Col span={6}><div style={{...headerStyle}}><text style={{...headerTextStyle}}>{t('筛选')}</text></div></Col>\r\n          <Col span={18}><div style={{...headerStyle}}><text style={{...headerTextStyle}}>{t('技能列表')}</text></div></Col>\r\n          <Col span={6}>\r\n            <div style={{height:dynamicListHeight,overflowY:'scroll',\r\n            display:'flex',flexDirection:'column'}}>\r\n              <SkillCheckbox onUpdate={onSkillCheckboxUpdate}></SkillCheckbox>\r\n            </div>\r\n          </Col>\r\n          <Col span={18}>\r\n            <div style={{height:dynamicListHeight,overflowY:'scroll',overflowX:'hidden'}}>\r\n              {['ノーマル','レア','固有'].map(rare=>\r\n                <Row gutter={[8,8]} key={rare}>\r\n                  <Divider>{rareLabel[rare]}</Divider>\r\n                  { skillList.filter(item=>item.rare === rare).map(skill=>\r\n                    <Col  xxl={6} lg={6} sm={12} xs={12}>\r\n                      <SkillButton usedInList={true} skill={skill} key={skill.id}></SkillButton>\r\n                    </Col>\r\n                  )}\r\n                </Row>\r\n              )}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  </>)\r\n}\r\n\r\nexport default Skill\r\n\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Row,\r\n  Alert,\r\n  Image,\r\n  Button,\r\n  Divider,\r\n  Table,\r\n  Modal,\r\n  Col,\r\n  Radio,\r\n  Rate,\r\n  Form,\r\n  Slider,\r\n  PageHeader,\r\n  Input,\r\n  Space,\r\n  Card,\r\n} from \"antd\";\r\nimport { message } from \"antd\";\r\n//test\r\nimport { PlusOutlined, SmileOutlined, FrownOutlined, CopyOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\n\r\nimport axios from \"axios\";\r\nimport db from \"../db.js\";\r\nimport dbL from \"../dbL.js\";\r\nimport t from \"../components/t.js\";\r\nimport \"./seed.css\";\r\n\r\nimport Player from \"./player.js\";\r\nimport Support from \"./support.js\";\r\nconst cdnServer = \"https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/\";\r\n// db.set('userId',null).write()\r\nlet userId = dbL.get(\"userId\").value();\r\n// console.log(userId)\r\n\r\n/*\r\nuserId 随机生成\r\n种马玩家id\r\n种马id\r\n蓝色因子 - speed stamina power guts wisdom\r\n红色因子 - grass dirt shortDistance mile mediumDistance longDistance\r\n        - escapeR leadingR insertR trackingR\r\n绿色因子\r\n种马父id\r\n种马母id\r\n\r\ntotal blue\r\ntotal red\r\nwhite num\r\n*/\r\n// 生成一个userId\r\n\r\nconst blueLabels = {\r\n  speed: \"速度\",\r\n  stamina: \"耐力\",\r\n  power: \"力量\",\r\n  guts: \"根性\",\r\n  wisdom: \"智力\",\r\n};\r\nconst redLabels = {\r\n  grass: \"草地\",\r\n  dirt: \"泥地\",\r\n  shortDistance: \"短距离\",\r\n  mile: \"英里\",\r\n  mediumDistance: \"中距离\",\r\n  longDistance: \"长距离\",\r\n  escapeR: \"逃\",\r\n  leadingR: \"先\",\r\n  insertR: \"差\",\r\n  trackingR: \"追\",\r\n};\r\n\r\nconst PlayerInput = ({ value = {}, onChange }) => {\r\n  const [isPlayerVisible, setIsPlayerVisible] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const showPlayer = (index) => {\r\n    setIsPlayerVisible(true);\r\n  };\r\n  const closePlayer = () => {\r\n    setIsPlayerVisible(false);\r\n  };\r\n  const triggerChange = (changedValue) => {\r\n    setIsPlayerVisible(false);\r\n    onChange?.({\r\n      ...data,\r\n      ...value,\r\n      ...changedValue,\r\n    });\r\n  };\r\n  const handleSelectPlayer = (data) => {\r\n    setData(data);\r\n    triggerChange(data);\r\n  };\r\n  return (\r\n    <>\r\n      <Image\r\n        src={data.imgUrl ? cdnServer + data.imgUrl : \"\"}\r\n        preview={false}\r\n        fallback=\"data:image/png;base64,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\"\r\n        width={80}\r\n        onClick={showPlayer}\r\n      ></Image>\r\n      <Modal visible={isPlayerVisible} onOk={closePlayer} onCancel={closePlayer} width={\"80%\"}>\r\n        <Player onSelect={handleSelectPlayer}></Player>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\nconst SupportInput = ({ value = {}, onChange }) => {\r\n  const [isSupportVisible, setIsSupportVisible] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const showSupport = (index) => {\r\n    setIsSupportVisible(true);\r\n  };\r\n  const closeSupport = () => {\r\n    setIsSupportVisible(false);\r\n  };\r\n  const triggerChange = (changedValue) => {\r\n    setIsSupportVisible(false);\r\n    onChange?.({\r\n      ...data,\r\n      ...value,\r\n      ...changedValue,\r\n    });\r\n  };\r\n  const handleSelectSupport = (data) => {\r\n    setData(data);\r\n    triggerChange(data);\r\n  };\r\n  return (\r\n    <>\r\n      <Image\r\n        src={data.imgUrl ? cdnServer + data.imgUrl : \"\"}\r\n        preview={false}\r\n        fallback=\"data:image/png;base64,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\"\r\n        width={80}\r\n        onClick={showSupport}\r\n      ></Image>\r\n      <Modal visible={isSupportVisible} onOk={closeSupport} onCancel={closeSupport} width={\"80%\"}>\r\n        <Support onSelect={handleSelectSupport}></Support>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\nconst SeedInput = (props) => {\r\n  const [form] = Form.useForm();\r\n  const [seed, setSeed] = useState({});\r\n\r\n  const onFinish = async (value) => {\r\n    let tmpSeed = seed;\r\n    tmpSeed = Object.assign({}, seed, value);\r\n    setSeed(tmpSeed);\r\n    // db.set('form',form).write()\r\n    // 修整成需要的数据\r\n    const formData = { ...tmpSeed };\r\n    formData.userId = userId || dbL.get(\"userId\").value();\r\n    let updateTime = new Date().getTime();\r\n    formData.updateTime = updateTime;\r\n    formData[\"playerId0\"] = value[\"player0\"].id;\r\n    formData[\"playerId1\"] = value[\"player1\"].id;\r\n    formData[\"playerId2\"] = value[\"player2\"].id;\r\n    formData[\"supportId\"] = value[\"support\"].id;\r\n    delete formData[\"support\"];\r\n    delete formData[\"player0\"];\r\n    delete formData[\"player1\"];\r\n    delete formData[\"player2\"];\r\n    // formData[formData['blue0']]=formData['blueLevel0']\r\n    // formData[formData['red0']]=formData['redLevel0']\r\n    let list = [\"0\", \"1\", \"2\"];\r\n    list.forEach((i) => {\r\n      //统计蓝色因子\r\n      if (formData[formData[`blue${i}`]] !== undefined) {\r\n        formData[formData[`blue${i}`]] += formData[`blueLevel${i}`];\r\n      } else {\r\n        formData[formData[`blue${i}`]] = formData[`blueLevel${i}`];\r\n      }\r\n      //统计红色因子\r\n      if (formData[formData[`red${i}`]] !== undefined) {\r\n        formData[formData[`red${i}`]] += formData[`redLevel${i}`];\r\n      } else {\r\n        formData[formData[`red${i}`]] = formData[`redLevel${i}`];\r\n      }\r\n      //统计红色因子\r\n      if (formData[\"white\"] !== undefined) {\r\n        formData[\"white\"] += formData[`whiteNum${i}`];\r\n      } else {\r\n        formData[\"white\"] = formData[`whiteNum${i}`];\r\n      }\r\n      //统计ura\r\n      if (formData[\"uraLevel\"] !== undefined) {\r\n        formData['uraLevel'] += formData[`uraLevel${i}`]\r\n      } else {\r\n        formData['uraLevel'] = formData[`uraLevel${i}`]\r\n      }\r\n\r\n    });\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/add\", formData);\r\n    if (res.data && res.data.success) {\r\n      message.info(\"成功添加\");\r\n      props.onFinish();\r\n    } else {\r\n      message.info(\"有地方出错了\");\r\n    }\r\n  };\r\n  const list = [\"主要\", \"父辈1\", \"父辈2\"];\r\n\r\n  const getFields = () => {\r\n    const children = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      children.push(\r\n        <Col span={8} key={i}>\r\n          <PageHeader title={`${list[i]}`}></PageHeader>\r\n          <Row>\r\n            <Col span={6} offset={4}>\r\n              <Form.Item label=\"角色\" name={`player${i}`} rules={[{ required: true }]}>\r\n                <PlayerInput></PlayerInput>\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n          <Form.Item label=\"蓝色因子\" name={`blue${i}`} rules={[{ required: true }]}>\r\n            <Radio.Group>\r\n              <Radio.Button value={\"speed\"}>{\"速度\"}</Radio.Button>\r\n              <Radio.Button value={\"stamina\"}>{\"耐力\"}</Radio.Button>\r\n              <Radio.Button value={\"power\"}>{\"力量\"}</Radio.Button>\r\n              <Radio.Button value={\"guts\"}>{\"根性\"}</Radio.Button>\r\n              <Radio.Button value={\"wisdom\"}>{\"智力\"}</Radio.Button>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Form.Item label=\"蓝色因子星数\" name={`blueLevel${i}`} rules={[{ required: true }]}>\r\n            <Rate count={3} />\r\n          </Form.Item>\r\n          <Form.Item label=\"红色因子\" name={`red${i}`} rules={[{ required: true }]}>\r\n            <Radio.Group>\r\n              <Radio.Button value={\"grass\"}>{\"草地/芝\"}</Radio.Button>\r\n              <Radio.Button value={\"dirt\"}>{\"泥地/ダート\"}</Radio.Button>\r\n              <hr />\r\n              <Radio.Button value={\"shortDistance\"}>{\"短距离\"}</Radio.Button>\r\n              <Radio.Button value={\"mile\"}>{\"英里\"}</Radio.Button>\r\n              <Radio.Button value={\"mediumDistance\"}>{\"中距离\"}</Radio.Button>\r\n              <Radio.Button value={\"longDistance\"}>{\"长距离\"}</Radio.Button>\r\n              <hr />\r\n              <Radio.Button value={\"escapeR\"}>{\"逃\"}</Radio.Button>\r\n              <Radio.Button value={\"leadingR\"}>{\"先\"}</Radio.Button>\r\n              <Radio.Button value={\"insertR\"}>{\"差\"}</Radio.Button>\r\n              <Radio.Button value={\"trackingR\"}>{\"追\"}</Radio.Button>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Form.Item label=\"红色因子星数\" name={`redLevel${i}`} rules={[{ required: true }]}>\r\n            <Rate count={3} />\r\n          </Form.Item>\r\n          <Form.Item label=\"绿色因子星数\" name={`greenLevel${i}`} initialValue={0}>\r\n            <Rate count={3} />\r\n          </Form.Item>\r\n          <Form.Item label=\"URA因子星数\" name={`uraLevel${i}`} initialValue={0}>\r\n            <Rate count={3} />\r\n          </Form.Item>\r\n          <Form.Item label=\"白色因子个数\" name={`whiteNum${i}`} initialValue={0}>\r\n            <Slider min={0} max={10} dots={true} tooltipPlacement={\"left\"}></Slider>\r\n          </Form.Item>\r\n        </Col>\r\n      );\r\n    }\r\n    return children;\r\n  };\r\n  return (\r\n    <Form name={\"因子信息\"} form={form} onFinish={onFinish}>\r\n      <Alert\r\n        message=\"目前每人只能配置一个种子 自觉维护自己的信息；第一次添加前先刷新 否则可能失败\"\r\n        type=\"info\"\r\n      ></Alert>\r\n      <Row gutter={24}>{getFields()}</Row>\r\n      <Row justify=\"end\">\r\n        <Col span={3}>\r\n          <Form.Item label=\"辅助卡\" name={\"support\"} rules={[{ required: true }]}>\r\n            <SupportInput></SupportInput>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={4} offset={1}>\r\n          <Form.Item label=\"辅助卡突破\" name={\"supportLevel\"} initialValue={0}>\r\n            <Rate count={4} />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={4} offset={1}>\r\n          <Form.Item\r\n            label=\"玩家id\"\r\n            name=\"gameId\"\r\n            rules={[\r\n              { required: true },\r\n              ({ getFieldValue }) => ({\r\n                validator(_, value) {\r\n                  console.log(\"!!!!\", value);\r\n                  if (value.match(/^[0-9]\\d*$/g) && value.length === 9) {\r\n                    return Promise.resolve();\r\n                  }\r\n                  return Promise.reject(new Error(\"输入正确的9位数id\"));\r\n                },\r\n              }),\r\n            ]}\r\n          >\r\n            <Input placeholder=\"id\" style={{ width: \"100%\" }}></Input>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={2} offset={2}>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              提交\r\n            </Button>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst SearchOne = (props) => {\r\n  return (\r\n    <Form.List name={props.name}>\r\n      {(fields, { add, remove }, { errors }) => (\r\n        <>\r\n          <Row>\r\n            {fields.map((field, index) => (\r\n              <Col key={field.key} lg={8} md={12} xs={24}>\r\n                <Row>\r\n                  <Form.Item\r\n                    {...field}\r\n                    name={[field.name, \"attr\"]}\r\n                    fieldKey={[field.fieldKey, \"attr\"]}\r\n                    rules={[{ required: true }]}\r\n                    validateTrigger={[\"onChange\", \"onBlur\"]}\r\n                    noStyle\r\n                  >\r\n                    <Radio.Group>\r\n                      <Radio.Button value={\"speed\"}>{\"速度\"}</Radio.Button>\r\n                      <Radio.Button value={\"stamina\"}>{\"耐力\"}</Radio.Button>\r\n                      <Radio.Button value={\"power\"}>{\"力量\"}</Radio.Button>\r\n                      <Radio.Button value={\"guts\"}>{\"根性\"}</Radio.Button>\r\n                      <Radio.Button value={\"wisdom\"}>{\"智力\"}</Radio.Button>\r\n                      <br />\r\n                      <Radio.Button value={\"grass\"}>{\"草地/芝\"}</Radio.Button>\r\n                      <Radio.Button value={\"dirt\"}>{\"泥地/ダート\"}</Radio.Button>\r\n                      <br />\r\n                      <Radio.Button value={\"shortDistance\"}>{\"短距离\"}</Radio.Button>\r\n                      <Radio.Button value={\"mile\"}>{\"英里\"}</Radio.Button>\r\n                      <Radio.Button value={\"mediumDistance\"}>{\"中距离\"}</Radio.Button>\r\n                      <Radio.Button value={\"longDistance\"}>{\"长距离\"}</Radio.Button>\r\n                      <br />\r\n                      <Radio.Button value={\"escapeR\"}>{\"逃\"}</Radio.Button>\r\n                      <Radio.Button value={\"leadingR\"}>{\"先\"}</Radio.Button>\r\n                      <Radio.Button value={\"insertR\"}>{\"差\"}</Radio.Button>\r\n                      <Radio.Button value={\"trackingR\"}>{\"追\"}</Radio.Button>\r\n                      <br />\r\n                      <Radio.Button value={\"uraLevel\"}>{\"URA\"}</Radio.Button>\r\n                    </Radio.Group>\r\n                  </Form.Item>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Item\r\n                    {...field}\r\n                    name={[field.name, \"level\"]}\r\n                    fieldKey={[field.fieldKey, \"level\"]}\r\n                    rules={[{ required: true }]}\r\n                  >\r\n                    <Rate count={props.max} />\r\n                  </Form.Item>\r\n                </Row>\r\n                <Col span={5}>\r\n                  <Button type=\"dashed\" onClick={() => remove(field.name)}>\r\n                    移除\r\n                  </Button>\r\n                </Col>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n          <Row justify=\"start\">\r\n            <Form.Item>\r\n              <Button\r\n                type=\"dashed\"\r\n                onClick={() => add()}\r\n                // style={{ width: '60%' }}\r\n                icon={<PlusOutlined />}\r\n              >\r\n                添加过滤条件\r\n              </Button>\r\n\r\n              <Form.ErrorList errors={errors} />\r\n            </Form.Item>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </Form.List>\r\n  );\r\n};\r\n\r\nconst SearchForm = (props) => {\r\n  const [form] = Form.useForm();\r\n  const onFinish = async (value) => {\r\n    let formData = { attrs: [], levels: [] };\r\n    if (value[\"player0\"]) {\r\n      formData.attrs.push(\"playerId0\");\r\n      formData.levels.push(value[\"player0\"].id);\r\n    }\r\n    if (value[\"supportLevel\"]) {\r\n      formData.attrs.push(\"supportLevel\");\r\n      formData.levels.push(value[\"supportLevel\"]);\r\n    }\r\n    if (value[\"support\"]) {\r\n      formData.attrs.push(\"supportId\");\r\n      formData.levels.push(value[\"support\"].id);\r\n    }\r\n    value.p0?.forEach((item) => {\r\n      if (blueLabels[item.attr]) {\r\n        formData[\"blue0\"] = item.attr;\r\n        formData.attrs.push(\"blueLevel0\");\r\n        formData.levels.push(item.level);\r\n      } else if (redLabels[item.attr]) {\r\n        formData[\"red0\"] = item.attr;\r\n        formData.attrs.push(\"redLevel0\");\r\n        formData.levels.push(item.level);\r\n      } else if (item.attr === 'uraLevel') {\r\n        formData.attrs.push(\"uraLevel0\");\r\n        formData.levels.push(item.level);\r\n      }\r\n    });\r\n    value.p1?.forEach((item) => {\r\n      formData.attrs.push(item.attr);\r\n      formData.levels.push(item.level);\r\n    });\r\n\r\n    props.search(formData);\r\n  };\r\n  const onReset = () => {\r\n    form.resetFields();\r\n  };\r\n  return (\r\n    <Form name=\"搜索\" form={form} onFinish={onFinish} className=\"seed-form\">\r\n      <Row>\r\n        <Form.Item label=\"角色\" name={`player0`}>\r\n          <PlayerInput></PlayerInput>\r\n        </Form.Item>\r\n      </Row>\r\n      <SearchOne name=\"p0\" max=\"3\"></SearchOne>\r\n      <div>总计:</div>\r\n      <SearchOne name=\"p1\" max=\"9\"></SearchOne>\r\n      <Row>\r\n        <Form.Item label=\"支援卡\" name={\"support\"}>\r\n          <SupportInput></SupportInput>\r\n        </Form.Item>\r\n        <Form.Item label=\"突破等级\" name={\"supportLevel\"} initialValue={0}>\r\n          <Rate count={4} />\r\n        </Form.Item>\r\n      </Row>\r\n      <Row justify=\"end\">\r\n        <Form.Item>\r\n          <Button htmlType=\"button\" onClick={() => onReset()}>\r\n            重置\r\n          </Button>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            搜索\r\n          </Button>\r\n        </Form.Item>\r\n      </Row>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst PlayerImage = (props) => {\r\n  let imgUrl = db.get(\"players\").find({ id: props.id }).value().imgUrl;\r\n  return (\r\n    <Image\r\n      src={cdnServer + imgUrl}\r\n      fallback=\"data:image/png;base64,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\"\r\n      width={80}\r\n      preview={false}\r\n    ></Image>\r\n  );\r\n};\r\n\r\nconst SupportImage = (props) => {\r\n  let support = db.get(\"supports\").find({ id: props.id }).value();\r\n  let imgUrl = \"\";\r\n  if (support) {\r\n    imgUrl = support.imgUrl;\r\n  }\r\n  return (\r\n    <Image\r\n      src={cdnServer + imgUrl}\r\n      fallback=\"data:image/png;base64,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\"\r\n      width={80}\r\n      preview={false}\r\n    ></Image>\r\n  );\r\n};\r\n\r\nconst Seed = () => {\r\n  const [isSeedInputVisible, setIsSeedInputVisible] = useState(false);\r\n  const [seedList, setSeedList] = useState([]);\r\n  const [total, setTotal] = useState(0)\r\n  const [current, setCurrent] = useState(0)\r\n  const [value, setValue] = useState()\r\n\r\n  const columns = [\r\n    {\r\n      title: \"玩家id\",\r\n      dataIndex: \"gameId\",\r\n      key: \"gameId\",\r\n      render: (text, seed) => (\r\n        <>\r\n          <Row>\r\n            <p>{text}</p>\r\n            <CopyToClipboard text={text} onCopy={() => message.info(\"成功\")}>\r\n              <Button shape=\"circle\" icon={<CopyOutlined />} />\r\n            </CopyToClipboard>\r\n          </Row>\r\n          <Row align=\"middle\">\r\n            <Button shape=\"circle\" icon={<SmileOutlined />} onClick={() => like(seed)} />\r\n            <p>{seed.likes}</p>\r\n          </Row>\r\n          <Row align=\"middle\">\r\n            <Button shape=\"circle\" icon={<FrownOutlined />} onClick={() => dislike(seed)} />\r\n            <p>{seed.dislikes}</p>\r\n          </Row>\r\n          {seed.userId === userId && <Row align=\"middle\">\r\n            <Button shape=\"circle\" icon={<DeleteOutlined />}\r\n              style={{ color: 'red' }} onClick={() => deleteSeed(seed)} />\r\n          </Row>}\r\n        </>\r\n      ),\r\n    },\r\n    {\r\n      title: \"主要\",\r\n      dataIndex: \"playerId0\",\r\n      key: \"playerId0\",\r\n      render: (text) => <PlayerImage id={text}></PlayerImage>,\r\n    },\r\n    {\r\n      title: \"蓝色因子\",\r\n      dataIndex: \"blue0\",\r\n      key: \"blue0\",\r\n      render: (text, record) =>\r\n        <span className=\"rate-label\">\r\n          {`${blueLabels[text]}\\xa0\\xa0${record[\"blueLevel0\"]}`}\r\n        </span>\r\n      ,\r\n    },\r\n    {\r\n      title: \"红色因子\",\r\n      dataIndex: \"red0\",\r\n      key: \"red0\",\r\n      render: (text, record) =>\r\n        <span className=\"rate-label\">\r\n          {`${redLabels[text]}\\xa0\\xa0${record[\"redLevel0\"]}`}\r\n        </span>\r\n      ,\r\n    },\r\n    {\r\n      title: \"绿色因子\",\r\n      dataIndex: \"greenLevel0\",\r\n      key: \"greenLevel0\",\r\n      render: (text, record) =>\r\n        <span className=\"rate-label\">\r\n          {`固有\\xa0\\xa0${record[\"greenLevel0\"]}`}\r\n        </span>\r\n      ,\r\n    }, {\r\n      title: \"URA\",\r\n      dataIndex: \"uraLevel0\",\r\n      key: \"uraLevel0\",\r\n      render: (text, record) =>\r\n        <span className=\"rate-label\">\r\n          {`${record[\"uraLevel0\"]? `URA  ${record[\"uraLevel0\"]}`:''}`}\r\n        </span>\r\n      ,\r\n    },\r\n    {\r\n      title: \"父辈1\",\r\n      dataIndex: \"playerId1\",\r\n      key: \"playerId1\",\r\n      render: (text) => <PlayerImage id={text}></PlayerImage>,\r\n    },\r\n    {\r\n      title: \"父辈2\",\r\n      dataIndex: \"playerId2\",\r\n      key: \"playerId2\",\r\n      render: (text) => <PlayerImage id={text}></PlayerImage>,\r\n    },\r\n    {\r\n      title: \"总计蓝色\",\r\n      key: \"allBlue\",\r\n      render: (text, record) =>\r\n        Object.keys(blueLabels).map((key) => {\r\n          if (record[key]) {\r\n            // console.log(key,record[key])\r\n            return (\r\n              <span className=\"rate-label\">\r\n                {`${blueLabels[key]}\\xa0\\xa0${record[key]}`}\r\n              </span>\r\n            );\r\n          } else {\r\n            return null;\r\n          }\r\n        }),\r\n    },\r\n    {\r\n      title: \"总计红色\",\r\n      key: \"allRed\",\r\n      render: (text, record) =>\r\n        Object.keys(redLabels).map((key) => {\r\n          if (record[key]) {\r\n            return (\r\n              <span className=\"rate-label\">\r\n                {`${redLabels[key]}\\xa0\\xa0${record[key]}`}\r\n              </span>\r\n            );\r\n          } else {\r\n            return null;\r\n          }\r\n        }),\r\n    },\r\n    { title: \"总计URA\", dataIndex: \"uraLevel\", key: \"uraLevel\", render: (text) => text },\r\n    { title: \"总计白色\", dataIndex: \"white\", key: \"white\", render: (text) => text },\r\n    {\r\n      title: \"支援卡\",\r\n      dataIndex: \"supportId\",\r\n      key: \"supportId\",\r\n      render: (text) => <SupportImage id={text}></SupportImage>,\r\n    },\r\n    {\r\n      title: \"突破等级\",\r\n      dataIndex: \"supportLevel\",\r\n      key: \"supportLevel\",\r\n      render: (text, record) => (\r\n        <Row>\r\n          <Rate count={4} value={record[\"supportLevel\"]} disabled></Rate>\r\n        </Row>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const showSeedInput = (index) => {\r\n    setIsSeedInputVisible(true);\r\n  };\r\n  const closeSeedInput = () => {\r\n    setIsSeedInputVisible(false);\r\n  };\r\n  const showMySeed = () => {\r\n    search({ attrs: ['userId'], levels: [userId] })\r\n  }\r\n  const deleteSeed = async (value) => {\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/delete\", value);\r\n    if (res.data) {\r\n      message.info(\"成功删除\");\r\n    } else {\r\n      message.info(\"出错了\");\r\n    }\r\n  }\r\n  const search = async (value) => {\r\n    setValue(value)\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/search\", value);\r\n    setCurrent(0)\r\n    if (res.data) {\r\n      if (res.data.count) {\r\n        setSeedList([...res.data.list]);\r\n        setTotal(res.data.count)\r\n      } else {\r\n        setSeedList([]);\r\n        setTotal(0)\r\n        message.info(\"暂无数据\");\r\n      }\r\n    } else {\r\n      message.info(\"出错了\");\r\n    }\r\n  };\r\n  const like = async (seed) => {\r\n    if (!userId) {\r\n      message.info(\"刷新后重试\");\r\n      return;\r\n    }\r\n    let id = seed.id;\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/like\", { id, userId });\r\n    if (res.data) {\r\n      message.info(\"成功\");\r\n      seed.likes +=1\r\n    }\r\n    setSeedList([...seedList]);\r\n  };\r\n  const dislike = async (seed) => {\r\n    if (!userId) {\r\n      message.info(\"刷新后重试\");\r\n      return;\r\n    }\r\n    let id = seed.id;\r\n    const res = await axios.post(\"https://urarawin.com/api/sqlite/dislike\", { id, userId });\r\n    if (res.data) {\r\n      message.info(\"成功\");\r\n      seed.dislikes +=1\r\n    }\r\n    setSeedList([...seedList]);\r\n  };\r\n  const onChange = (e) => {\r\n    search({\r\n      ...value,\r\n      count: e.total,\r\n      offset: e.current * 10 - 10\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"seed-container\">\r\n        <Card className=\"card\" title=\"过滤条件\">\r\n          <SearchForm search={search}></SearchForm>\r\n          <Button onClick={() => showSeedInput()}>配置我的种子</Button>\r\n          <Button onClick={() => showMySeed()}>查看我的种子</Button>\r\n        </Card>\r\n        <Card className=\"card\" title=\"结果\">\r\n          <Table columns={columns} dataSource={seedList} onChange={onChange}\r\n            pagination={{ pageSize: 10, total: total,simple:true,showQuickJumper:false,\r\n              position: ['topRight', 'bottomRight'] }} rowKey={\"id\"} />\r\n        </Card>\r\n      </div>\r\n      <Modal\r\n        visible={isSeedInputVisible}\r\n        onOk={closeSeedInput}\r\n        onCancel={closeSeedInput}\r\n        footer={null}\r\n        width={\"80%\"}\r\n      >\r\n        <SeedInput onFinish={closeSeedInput}></SeedInput>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\nexport default Seed;\r\n","import React,{useState} from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport {Button,Popover } from 'antd';\r\nimport t from './t.js';\r\nimport Flag from 'rc-national-flag'\r\n// import t from './t.js'\r\n\r\nconst ua = dbL.get('ua').value();\r\n\r\nconst LanButton = (props)=>{\r\n  let lan = dbL.get('lan').value()\r\n  const [code,setCode]= useState(lan||'cn')\r\n  console.log(code)\r\n  const changeToCn=()=>{\r\n    lan = 'cn'\r\n    dbL.set('lan','cn').write()\r\n    setCode('cn')\r\n    t('','cn')\r\n    window.location.reload(true)\r\n  }\r\n  const changeToUs=()=>{\r\n    lan = 'us'\r\n    dbL.set('lan','us').write()\r\n    setCode('us')\r\n    t('','us')\r\n    window.location.reload(true)\r\n  }\r\n  const changeToJp=()=>{\r\n    lan = 'jp'\r\n    dbL.set('lan','jp').write()\r\n    setCode('jp')\r\n    t('','jp')\r\n    window.location.reload(true)\r\n  }\r\n  const flagStyle={\r\n    width:40,\r\n    height:30,\r\n    margin:4\r\n  }\r\n  return(\r\n  <Popover content={<div style={{display:'flex'}}>\r\n  <Flag onClick={changeToCn} code={'cn'} style={{...flagStyle}}></Flag>\r\n  <Flag onClick={changeToUs} code={'us'} style={{...flagStyle}}></Flag>\r\n  <Flag onClick={changeToJp} code={'jp'} style={{...flagStyle}}></Flag>\r\n  </div>}>\r\n      <Flag code={code} style={{...flagStyle}}></Flag>\r\n  </Popover>\r\n  )\r\n}\r\n\r\nexport default withRouter(LanButton)\r\n","import React,{useState} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport { Steps, Hints } from 'intro.js-react';\nimport 'intro.js/introjs.css';\nconst IntroIndex = (props)=>{\n  const introV = '0.0.1'\n  console.log(localStorage.getItem('introV'))\n  console.log(introV)\n  const [stepsEnabled,setStepsEnabled] = useState(localStorage.getItem('introV')!==introV);\n  const initialStep = 0;\n  const steps=[\n    {\n      title:'角色信息',\n      element:'.menu-player',\n      intro:<>\n        <p>点击查看详情</p>\n      </>,\n      href:'/'\n    },{\n      title:'支援卡信息',\n      element:'.menu-support',\n      intro:<>\n          <p>点击查看详情</p>\n          <p>通过育成效果筛选</p>\n          <p>【切换显示模式】切换全部、已拥有</p>\n          <p>【配置卡组】选择拥有的辅助卡，技能页面筛选拥有的技能</p>\n        </>,\n      href:'/support'\n    },{\n      title:'技能信息',\n      element:'.menu-skill',\n      intro:<>\n        <p>鼠标悬浮查看详情</p>\n        <p>通过条件和类型进行筛选</p>\n        <p>【显示拥有支援卡】切换是否显示全部、已拥有</p>\n        <p>点击技能可以查看拥有该技能的角色和支援卡</p>\n      </>,\n      href:'/skill'\n    },{\n      title:'比赛信息',\n      element:'.menu-race',\n      intro:<>\n        <p>通过条件筛选</p>\n      </>,\n      href:'/race'\n    },{\n      title:'育成辅助页面',\n      element:'.menu-nurturing2',\n      intro:<>\n        <p>【选择马娘】选择培训的马娘</p>\n        <p>【选择支援卡】选择使用的支援卡</p>\n        <p>【卡组】卡组保存、读取、删除</p>\n      </>,\n        href:'/nurturing2'\n    },{\n      title:'种马和支援卡分享',\n      element:'.menu-seed',\n      intro:<>\n        <p>通过条件搜索种马和支援卡信息</p>\n        <p>【配置种子】添加自己的种马和支援卡信息分享</p>\n      </>,\n      href:'/seed'\n    },{\n      title:'初始化育成',\n      element:'.reset-nur',\n      intro:<>\n      <p>育成页面出现问题时点击修复</p>\n      <p>会清空卡组！！！</p>\n    </>,\n    },{\n      title:'重置引导',\n      element:'.reset-intro',\n      intro:<>\n      <p>点击后刷新重新观看引导</p>\n    </>,\n  }]\n\n  const onExit = ()=>{\n    localStorage.setItem('introV',introV)\n    setStepsEnabled(false)\n  }\n  const onBeforeChange = (nextStepIndex)=>{\n    steps[nextStepIndex].href&&props.history.push(steps[nextStepIndex].href)\n  }\n  const onComplete = ()=>{\n    localStorage.setItem('introV',introV)\n    setStepsEnabled(false)\n  }\n  return (\n    <Steps\n          enabled={stepsEnabled}\n          steps={steps}\n          initialStep={initialStep}\n          onExit={onExit}\n          onBeforeChange={onBeforeChange}\n          onComplete={onComplete}\n          options={{\n            doneLabel:'Done'\n          }}\n        />\n  )\n}\nexport default withRouter(IntroIndex)\n","import React, { useState } from 'react';\r\nimport { HashRouter as Router, Route, Link } from 'react-router-dom';\r\nimport CacheRoute, { CacheSwitch } from 'react-router-cache-route'\r\nimport { Row, Col, Image, Layout, Menu, Button, Popover, Popconfirm } from 'antd'\r\nimport { message } from 'antd'\r\nimport 'antd/dist/antd.css';\r\nimport './index.css'\r\n\r\n\r\nimport db from './db.js'\r\nimport dbL from './dbL.js'\r\nimport t from './components/t.js'\r\n\r\nimport Race from './pages/race.js'\r\nimport Player from './pages/player.js'\r\nimport Support from './pages/support.js'\r\n// import Nurturing from './pages/nurturing.js'\r\nimport Nurturing2 from './pages/nurturing2.js'\r\nimport Skill from './pages/skill.js'\r\nimport Seed from './pages/seed.js'\r\n\r\nimport LanButton from './components/lan-button'\r\nimport IntroIndex from './components/intro.js'\r\n\r\nconst { Header, Content, Footer } = Layout;\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby@master/public/'\r\n\r\nconst AppPc = () => {\r\n\r\n  const resetNur = () => {\r\n    dbL.set('selected', {\r\n      supports: { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {} },\r\n      player: {},\r\n      races: []\r\n    }).write()\r\n    // db.set('myDecks',[]).write()\r\n  }\r\n  const resetIntro = () => {\r\n    localStorage.setItem('introV', null)\r\n  }\r\n  dbL.set('ua', 'pc').write();\r\n  //隐藏主要的overflow\r\n  const dom = document.getElementsByTagName(\"body\");\r\n  dom[0].style.overflowY = \"scroll\";\r\n\r\n  return (\r\n    // <UserAgentProvider ua={window.navigator.userAgent}>\r\n    <Router>\r\n      <IntroIndex></IntroIndex>\r\n      <Layout className=\"layout\">\r\n        <Header style={{ position: 'fixed', zIndex: 1, width: '100%' }}>\r\n          <Menu theme=\"dark\" mode=\"horizontal\">\r\n            <Menu.Item key=\"1\" className='menu-player'><Link to='/'>{t('角色')}</Link></Menu.Item>\r\n            <Menu.Item key=\"2\" className='menu-support'><Link to='/support'>{t('支援卡')}</Link></Menu.Item>\r\n            <Menu.Item key=\"3\" className='menu-skill'><Link to='/skill'>{t('技能')}</Link></Menu.Item>\r\n            <Menu.Item key=\"4\" className='menu-race'><Link to='/race'>{t('比赛')}</Link></Menu.Item>\r\n            {/* <Menu.Item key=\"5\" className='menu-nurturing'><Link to='/nurturing'>{t('育成')}</Link></Menu.Item> */}\r\n            <Menu.Item key=\"7\" className='menu-nurturing2'><Link to='/nurturing2'>{t('育成')}</Link></Menu.Item>\r\n            <Menu.Item key=\"6\" className='menu-seed'><Link to='/seed'>{t('种马分享')}</Link></Menu.Item>\r\n            <LanButton style={{ float: 'right' }}></LanButton>\r\n          </Menu>\r\n        </Header>\r\n        <Content style={{ paddingTop: '64px' }} >\r\n          <CacheSwitch>\r\n            <CacheRoute exact path=\"/\" component={Player} />\r\n            <CacheRoute path=\"/support\" component={Support} />\r\n            <CacheRoute path=\"/skill\" component={Skill} />\r\n            <CacheRoute path=\"/nurturing\" component={Nurturing2} />\r\n            <CacheRoute path=\"/nurturing2\" component={Nurturing2} />\r\n            <CacheRoute path=\"/seed\" component={Seed} />\r\n            <CacheRoute path=\"/race\" component={Race} />\r\n          </CacheSwitch>\r\n        </Content>\r\n        <Footer style={{ padding: '12px' }}>\r\n          <Row gutter={[16, 16]}>\r\n            <Col span={2}>\r\n              <Button className='reset-intro' placement=\"bottom\" onClick={resetIntro}>{t('重置引导')}</Button>\r\n            </Col>\r\n            <Col span={3}>\r\n              <Popconfirm title={t('确认初始化？')} onConfirm={resetNur}>\r\n                <Popover content={<p>{t('初始化育成页面')}</p>}>\r\n                  <Button className='reset-nur' placement=\"bottom\">{t('初始化育成')}</Button>\r\n                </Popover>\r\n              </Popconfirm>\r\n            </Col>\r\n            <Col span={12}></Col>\r\n            <Col span={2}>\r\n              <iframe title=\"GitHub\" src=\"https://ghbtns.com/github-btn.html?user=wrrwrr111&repo=pretty-derby&type=star&count=true&size=large&v=2\" frameBorder=\"0\" scrolling=\"0\" width=\"160px\" height=\"30px\"></iframe>\r\n            </Col>\r\n            <Col span={2}>\r\n              <Popover content={<><Image src={cdnServer + 'img/q.jpg'} width={300}></Image><p>{t('闲聊为主')}</p></>}>\r\n                <a target=\"_blank\" rel=\"noreferrer\" href=\"https://qm.qq.com/cgi-bin/qm/qr?k=f2Q2MIqkkxiiYq-sfRYmI7E4v17-r3V2&jump_from=webapi\">\r\n                  <img border=\"0\" src=\"//pub.idqqimg.com/wpa/images/group.png\" alt=\"轻 松 赛 马\" title=\"轻 松 赛 马\" />\r\n                </a>\r\n              </Popover>\r\n            </Col>\r\n            <Col span={2}>\r\n              <Popover content={<Image src={cdnServer + 'img/weapp.jpg'} width={200}></Image>}>\r\n                <Button placement=\"bottom\" style={{ display: 'flex' }}>\r\n                  <Image src={cdnServer + 'reimu.gif'} preview={false} width={24}></Image>\r\n                  <div>{t('微信小程序')}</div>\r\n                </Button>\r\n              </Popover>\r\n            </Col>\r\n          </Row>\r\n        </Footer>\r\n      </Layout>\r\n    </Router>\r\n    // </UserAgentProvider>\r\n  )\r\n}\r\n\r\nexport default AppPc\r\n","import React,{useState} from 'react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport shortid from 'shortid'\r\nimport db from '../db.js'\r\nimport dbL from '../dbL.js'\r\nimport t from '../components/t.js'\r\nimport { Divider,Row,Col,Modal,Button, Popconfirm,Popover,Tooltip} from 'antd';\r\nimport {EditOutlined} from '@ant-design/icons'\r\n\r\n\r\n// import Race from './race.js'\r\nimport Player from '../pages/player.js'\r\nimport Support from '../pages/support.js'\r\nimport {RaceSchedule,RaceTimeline,RaceCheckbox} from '../components/race.js'\r\n\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n\r\n\r\n\r\nconst Nurturing = (props) =>{\r\n  const [needSelect,setNeedSelect] = useState(false)\r\n  const [isPlayerVisible, setIsPlayerVisible] = useState(false);\r\n\r\n  const [isSupportVisible, setIsSupportVisible] = useState(false);\r\n  const [supportIndex, setSupportIndex] = useState(1);\r\n\r\n  // const [isRaceVisible, setIsRaceVisible] = useState(false);\r\n\r\n  const selected = dbL.get('selected').value()\r\n  const [supports, setSupports] = useState(selected.supports);\r\n  const [player, setPlayer] = useState(selected.player);\r\n  const races = db.get('races').value()\r\n  const [raceFilterCondition,setRaceFilterCondition] = useState(selected.raceFilterCondition||{\r\n    distanceType:[],\r\n    grade:[],\r\n    ground:[]})\r\n  const [filterRace,setFilterRace] = useState(selected.filterRace||{})\r\n  const [decks,setDecks] = useState(dbL.get('myDecks').value())\r\n\r\n\r\n\r\n  const showPlayer = () => {\r\n    setIsPlayerVisible(true);\r\n  };\r\n  const closePlayer = () => {\r\n    setIsPlayerVisible(false);\r\n  };\r\n  const handleSelectPlayer = (data)=>{\r\n    setIsPlayerVisible(false);\r\n    setPlayer(data)\r\n\r\n    // save\r\n    selected.player = data\r\n    dbL.get('selected').assign(selected).write()\r\n  }\r\n\r\n  const showSupport = (index) => {\r\n    setNeedSelect(true)\r\n    setIsSupportVisible(true);\r\n    setSupportIndex(index)\r\n  };\r\n  const showSupport2 = (index) => {\r\n    setNeedSelect(false)\r\n    setIsSupportVisible(true);\r\n    setSupportIndex(index)\r\n  };\r\n\r\n  const closeSupport = () => {\r\n    setIsSupportVisible(false);\r\n  };\r\n  const handleSelectSupport = (data)=>{\r\n    let newData= {}\r\n    newData[supportIndex] = data\r\n    setSupports(Object.assign({},supports,newData))\r\n    setIsSupportVisible(false);\r\n\r\n    // save\r\n    selected.supports[supportIndex] = data\r\n    dbL.get('selected').assign(selected).write()\r\n  }\r\n\r\n\r\n  // 卡组相关操作\r\n  const saveDeck = (deck)=>{\r\n    let tmpDeck = {\r\n      imgUrls:[],\r\n      supportsId:[],\r\n    }\r\n    if(player.id){\r\n      tmpDeck.playerId = player.id\r\n      tmpDeck.imgUrls.push(player.imgUrl)\r\n    }\r\n    [0,1,2,3,4,5].forEach(index=>{\r\n      if(supports[index]&&supports[index].id){\r\n        tmpDeck.imgUrls.push(supports[index].imgUrl)\r\n        tmpDeck.supportsId.push(supports[index].id)\r\n      }else{\r\n        tmpDeck.supportsId.push(null)\r\n      }\r\n    })\r\n    if(deck){\r\n      //update\r\n      dbL.get('myDecks').find({id:deck.id}).assign(tmpDeck).write()\r\n    }else{\r\n      //\r\n      tmpDeck.id = shortid.generate()\r\n      dbL.get('myDecks').push(tmpDeck).write()\r\n    }\r\n    setDecks([...dbL.get('myDecks').value()])\r\n  }\r\n  const loadDeck = (deck)=>{\r\n    selected.supports={0:{},1:{},2:{},3:{},4:{},5:{}}\r\n    selected.player={}\r\n    if(deck.playerId){\r\n      selected.player = db.get('players').find({id:deck.playerId}).value()\r\n    }\r\n    setPlayer(selected.player)\r\n    deck.supportsId.forEach((id,index)=>{\r\n      if(id){\r\n        selected.supports[index]=db.get('supports').find({id:id}).value()\r\n      }\r\n    })\r\n    setSupports({...selected.supports})\r\n    db.get('selected').assign(selected).write()\r\n  }\r\n  const deleteDeck = (deck)=>{\r\n    dbL.get('myDecks').remove({id:deck.id}).write()\r\n    setDecks([...dbL.get('myDecks').value()])\r\n  }\r\n// race checkbox发生变化\r\nconst onChangeRace = (filterCondition)=>{\r\n  setRaceFilterCondition(filterCondition)\r\n  //根据条件过滤\r\n  let tmpRaceList = Object.values(filterCondition).some(f => f.length > 0)\r\n      ? Object.entries(filterCondition)\r\n        .filter(([key, filters]) => filters.length > 0)\r\n        .reduce((result, [key, filters]) => result.filter(race => filters.includes(race[key])), races)\r\n      : [];\r\n  //过滤后整理成 dataNum:[raceId]\r\n  let tmpFilterRace = {}\r\n    for(let race of tmpRaceList){\r\n      if(tmpFilterRace[race.dateNum]){\r\n        tmpFilterRace[race.dateNum].push(race.id)\r\n      }else{\r\n        tmpFilterRace[race.dateNum]=[race.id]\r\n      }\r\n    }\r\n  //更新state\r\n  setFilterRace(tmpFilterRace)\r\n  selected.raceFilterCondition = filterCondition\r\n  selected.filterRace = tmpFilterRace\r\n  dbL.get('selected').assign({...selected}).write()\r\n}\r\n\r\n  const toSupportDetail = (id)=>{\r\n    props.history.push(`/support-detail/${id}`)\r\n  }\r\n  const toPlayerDetail = (id)=>{\r\n    props.history.push(`/player-detail/${id}/1`)\r\n  }\r\n  const toBuffList = (id)=>{\r\n    props.history.push(`/buff`)\r\n  }\r\n\r\n  return(<>\r\n    <div style={{display:'flex',justifyContent:'center'}}>\r\n      {player.imgUrl&&\r\n        <img src={cdnServer+player.imgUrl} alt={player.imgUrl} width='128'\r\n          onClick={()=>toPlayerDetail(player.id)}></img>\r\n      }\r\n      <div style={{flex:'1 1 auto',flexWrap:'wrap',display:'flex',justifyContent:'center'}} >\r\n        <Button type={'primary'} onClick={showPlayer}>{t('选择马娘')}</Button>\r\n        <Button onClick={showSupport2}>{t('支援卡查询')}</Button>\r\n        <Button onClick={toBuffList}>{t('BUFF')}</Button>\r\n        <Popover trigger='click' content={\r\n          <RaceCheckbox onChange={onChangeRace} raceFilterCondition={raceFilterCondition}></RaceCheckbox>\r\n        }>\r\n          <Button>{t('比赛')}</Button>\r\n        </Popover>\r\n        <Popover trigger='click' width={'80%'} content={\r\n          <>\r\n            <Button onClick={()=>saveDeck()}>{t('保存为新卡组')}</Button>\r\n            {decks.map(deck=>\r\n              <Row key={deck.id}>\r\n                {deck.imgUrls.map(imgUrl=>\r\n                  <Col span={3} key={imgUrl}>\r\n                    <img src={cdnServer+imgUrl} alt={imgUrl}  width={'100'}></img>\r\n                  </Col>\r\n                )}\r\n                <Col span={3}>\r\n                  <Button type=\"primary\" onClick={()=>loadDeck(deck)}>{t('读取卡组')}</Button>\r\n                  <Popconfirm title=\"确认覆盖？\" onConfirm={()=>saveDeck(deck)}>\r\n                    <Button danger type=\"dashed\">{t('覆盖卡组')}</Button>\r\n                  </Popconfirm>\r\n                  <Popconfirm title=\"确认删除？\" onConfirm={()=>deleteDeck(deck)}>\r\n                    <Button danger type=\"dashed\">{t('删除卡组')}</Button>\r\n                  </Popconfirm>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n          </>\r\n          }><Button>{t('我的卡组')}</Button>\r\n        </Popover>\r\n      </div>\r\n    </div>\r\n\r\n\r\n        <Row justify=\"space-around\">\r\n        {[0,1,2,3,4,5].map(index=>\r\n          <Col span={7} key={index} style={{}}>\r\n            <Button icon={<EditOutlined />} onClick={()=>showSupport(index)}>{t('选择支援卡')}</Button>\r\n            {supports[index]&&supports[index].id&&\r\n              <img src={cdnServer+supports[index].imgUrl} alt={supports[index].name} width={'100%'}\r\n              onClick={()=>toSupportDetail(supports[index].id)}></img>\r\n            }\r\n          </Col>\r\n        )}\r\n        </Row>\r\n\r\n      <Divider>比赛</Divider>\r\n      <div style={{overflow:'auto',paddingTop:'10px',width:'100%',height:'400px'}}>\r\n        <RaceTimeline raceList={player.raceList} filterRace={filterRace}></RaceTimeline>\r\n      </div>\r\n\r\n      <Modal visible={isPlayerVisible} onOk={closePlayer} onCancel={closePlayer} footer={null} width={'80%'}>\r\n        <Player onSelect={handleSelectPlayer}></Player>\r\n      </Modal>\r\n      <Modal visible={isSupportVisible} onOk={closeSupport} onCancel={closeSupport} footer={null} width={'80%'}>\r\n        <Support onSelect={needSelect?handleSelectSupport:null} ></Support>\r\n      </Modal>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default withRouter(Nurturing)\r\n\r\n\r\n","import React,{useState} from 'react';\r\n\r\nimport { Picker, List,Flex,Card } from 'antd-mobile';\r\n\r\nimport { Image,Button,Divider,Modal,Rate,Form} from 'antd';\r\nimport {message} from 'antd'\r\n//test\r\nimport {PlusOutlined,SmileOutlined,FrownOutlined,CopyOutlined } from '@ant-design/icons';\r\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\r\n\r\nimport axios from 'axios'\r\nimport db from '../db.js'\r\nimport t from '../components/t.js'\r\nimport Player from '../pages/player.js'\r\nimport Support from '../pages/support.js'\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\nlet userId = db.get('userId').value()\r\n\r\nconst blueLabels={\r\n  'speed':'速度',\r\n  'stamina':'耐力',\r\n  'power':'力量',\r\n  'guts':'根性',\r\n  'wisdom':'智力'\r\n}\r\nconst redLabels = {\r\n  'grass':'草地',\r\n  'dirt':'泥地',\r\n  'shortDistance':'短距离',\r\n  'mile':'英里',\r\n  'mediumDistance':'中距离',\r\n  'longDistance':'长距离',\r\n  'escapeR':'逃',\r\n  'leadingR':'先',\r\n  'insertR':'差',\r\n  'trackingR':'追'}\r\n\r\nconst lists = [\r\n  [\r\n    {value:'speed',label:t('速度')},\r\n    {value:'stamina',label:t('耐力')},\r\n    {value:'power',label:t('力量')},\r\n    {value:'guts',label:t('根性')},\r\n    {value:'wisdom',label:t('智力')},\r\n    {value:'grass',label:t('草地')},\r\n    {value:'dirt',label:t('泥地')},\r\n    {value:'shortDistance',label:t('短距离')},\r\n    {value:'mile',label:t('英里')},\r\n    {value:'mediumDistance',label:t('中距离')},\r\n    {value:'longDistance',label:t('长距离')},\r\n    {value:'escapeR',label:t('逃')},\r\n    {value:'leadingR',label:t('先')},\r\n    {value:'insertR',label:t('差')},\r\n    {value:'trackingR',label:t('追')}\r\n  ],[\r\n    {value:1,label:`1${t('星')}`},\r\n    {value:2,label:`2${t('星')}`},\r\n    {value:3,label:`3${t('星')}`},\r\n    {value:4,label:`4${t('星')}`},\r\n    {value:5,label:`5${t('星')}`},\r\n    {value:6,label:`6${t('星')}`},\r\n    {value:7,label:`7${t('星')}`},\r\n    {value:8,label:`8${t('星')}`},\r\n    {value:9,label:`9${t('星')}`},\r\n  ]\r\n]\r\n\r\n\r\n\r\nconst PlayerInput = ({ value = {}, onChange }) => {\r\n  const [isPlayerVisible, setIsPlayerVisible] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const showPlayer = (index) => {\r\n    setIsPlayerVisible(true);\r\n  };\r\n  const closePlayer = () => {\r\n    setIsPlayerVisible(false);\r\n  };\r\n  const triggerChange = (changedValue)=>{\r\n    setIsPlayerVisible(false);\r\n    onChange?.({\r\n      ...data,\r\n      ...value,\r\n      ...changedValue,\r\n    })\r\n  }\r\n  const handleSelectPlayer = (data)=>{\r\n    setData(data)\r\n    triggerChange(data)\r\n  }\r\n  return (\r\n    <>\r\n      <Image src={data.imgUrl?cdnServer+data.imgUrl:''}\r\n        preview={false} fallback=\"data:image/png;base64,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\"\r\n        width={'100%'} style={{minWidth:'100px'}} onClick={showPlayer}>\r\n      </Image>\r\n        <Modal visible={isPlayerVisible} onOk={closePlayer} onCancel={closePlayer} width={'80%'}>\r\n          <Player onSelect={handleSelectPlayer}></Player>\r\n        </Modal>\r\n    </>\r\n  );\r\n};\r\nconst SupportInput = ({ value = {}, onChange }) => {\r\n  const [isSupportVisible, setIsSupportVisible] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const showSupport = (index) => {\r\n    setIsSupportVisible(true);\r\n  };\r\n  const closeSupport = () => {\r\n    setIsSupportVisible(false);\r\n  };\r\n  const triggerChange = (changedValue)=>{\r\n    setIsSupportVisible(false);\r\n    onChange?.({\r\n      ...data,\r\n      ...value,\r\n      ...changedValue,\r\n    })\r\n  }\r\n  const handleSelectSupport = (data)=>{\r\n    setData(data)\r\n    triggerChange(data)\r\n  }\r\n  return (\r\n    <>\r\n      <Image src={data.imgUrl?cdnServer+data.imgUrl:''}\r\n        preview={false} fallback=\"data:image/png;base64,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\"\r\n        width={'100%'} style={{minWidth:'100px'}}  onClick={showSupport}>\r\n      </Image>\r\n        <Modal visible={isSupportVisible} onOk={closeSupport} onCancel={closeSupport} width={'80%'}>\r\n          <Support onSelect={handleSelectSupport}></Support>\r\n        </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nconst SearchOne = (props)=>{\r\n  return(\r\n    <Form.List name={props.name}>\r\n      {(fields, { add, remove }, { errors }) => (\r\n          <List>\r\n            {fields.map((field, index) => (\r\n                <Form.Item {...field} key={field.key}\r\n                  name={[field.name,'attr']}\r\n                  fieldKey={[field.fieldKey,'attr']}\r\n                  rules={[{required: true}]} validateTrigger={['onChange', 'onBlur']} noStyle>\r\n                      <Picker\r\n                        data={lists}\r\n                        cascade={false}\r\n                        extra={t('请选择')}\r\n                        ><List.Item arrow=\"horizontal\">{t('过滤条件(总计)')}</List.Item>\r\n                      </Picker>\r\n                </Form.Item>\r\n            ))}\r\n            <List.Item>\r\n                <Button\r\n                  type=\"dashed\"\r\n                  onClick={() => add()}\r\n                  icon={<PlusOutlined />}\r\n                  >\r\n                  {t('添加过滤条件')}\r\n                </Button>\r\n            </List.Item>\r\n          </List>\r\n        )}\r\n      </Form.List>\r\n  )\r\n}\r\nconst SearchForm = (props)=>{\r\n  const [form] = Form.useForm()\r\n\r\n  const onFinish = async (value)=>{\r\n    let formData = {attrs:[],levels:[]}\r\n    if(value['player0']){\r\n      formData.attrs.push('playerId0')\r\n      formData.levels.push(value['player0'].id)\r\n    }\r\n    if(value['support']){\r\n      formData.attrs.push('supportId')\r\n      formData.levels.push(value['support'].id)\r\n    }\r\n    value.p1?.forEach(item=>{\r\n      formData.attrs.push(item.attr[0])\r\n      formData.levels.push(item.attr[1])\r\n    })\r\n\r\n    props.search(formData)\r\n  }\r\n  const onReset = ()=>{\r\n    form.resetFields();\r\n  }\r\n  return(\r\n    <Form name='搜索' form={form} onFinish={onFinish} className=\"seed-form\">\r\n      <SearchOne name='p1'></SearchOne>\r\n      <Flex align='start'>\r\n        <Flex.Item>\r\n          <p>{t('角色')}</p>\r\n          <Form.Item name={`player0`}>\r\n              <PlayerInput></PlayerInput>\r\n          </Form.Item>\r\n        </Flex.Item>\r\n        <Flex.Item>\r\n          <p>{t('支援卡')}</p>\r\n          <Form.Item name={'support'}>\r\n            <SupportInput></SupportInput>\r\n          </Form.Item>\r\n        </Flex.Item>\r\n        <Flex.Item>\r\n          <p>{t('突破等级')}</p>\r\n          <Form.Item name={'supportLevel'} initialValue={0}>\r\n            <Rate count={4} />\r\n          </Form.Item>\r\n        </Flex.Item>\r\n      </Flex>\r\n      <Flex justify='end'>\r\n        <Form.Item>\r\n          <Button htmlType=\"button\" onClick={()=>onReset()}>\r\n            {t('重置')}\r\n          </Button>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            {t('搜索')}\r\n          </Button>\r\n        </Form.Item>\r\n      </Flex>\r\n    </Form>\r\n  )\r\n}\r\nconst PlayerImage = (props)=>{\r\n  let imgUrl =  db.get('players').find({id:props.id}).value().imgUrl\r\n  return <Image src={cdnServer+imgUrl} fallback=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==\"\r\n        width={80}  preview={false}></Image>\r\n}\r\nconst SupportImage = (props)=>{\r\n  let support = db.get('supports').find({id:props.id}).value()\r\n  let imgUrl = ''\r\n  if(support){\r\n    imgUrl =  support.imgUrl\r\n  }\r\n  return <Image src={cdnServer+imgUrl} fallback=\"data:image/png;base64,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\"\r\n        width={80} preview={false}></Image>\r\n}\r\n\r\nconst Seed = ()=>{\r\n  const SeedCard = (props) =>{\r\n    const data = props.data\r\n    return (\r\n      <Card>\r\n        <Flex>\r\n            <p style={{fontSize:'1.5em'}}>{data.gameId}</p>\r\n            <CopyToClipboard text={data.gameId} onCopy={()=>message.info('成功')}>\r\n              <Button shape=\"circle\" icon={<CopyOutlined />}/>\r\n            </CopyToClipboard>\r\n        </Flex>\r\n        <Flex>\r\n          <Flex.Item>\r\n            <PlayerImage id={data['playerId0']}></PlayerImage>\r\n            <SupportImage id={data['supportId']}></SupportImage>\r\n            <Flex align='middle'>\r\n              <Button shape=\"circle\" icon={<SmileOutlined />} onClick={()=>like(data)}/>\r\n              <p>{data.likes}</p>\r\n            </Flex>\r\n            <Flex align='middle'>\r\n              <Button shape=\"circle\" icon={<FrownOutlined />} onClick={()=>dislike(data)}/>\r\n              <p>{data.dislikes}</p>\r\n            </Flex>\r\n          </Flex.Item>\r\n          <Flex.Item>\r\n            <p>{`${t(blueLabels[data['blue0']])}: ${data['blueLevel0']}`}</p>\r\n            <p>{`${t(redLabels[data['red0']])}: ${data['redLevel0']}`}</p>\r\n            {Object.keys(blueLabels).map(key=>\r\n            data[key]?<p key={key}>{`${t('总计')} ${t(blueLabels[key])}: ${data[key]}`}</p>:null\r\n            )}\r\n            {Object.keys(redLabels).map(key=>\r\n            data[key]?<p key={key}>{`${t('总计')} ${t(redLabels[key])}: ${data[key]}`}</p>:null\r\n            )}\r\n            <p>{`${t('突破等级')}: ${data['supportLevel']||0}`}</p>\r\n          </Flex.Item>\r\n        </Flex>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  const [seedList,setSeedList] = useState([])\r\n  const search = async (value)=>{\r\n    const res = await axios.post('https://urarawin.com/api/sqlite/search',value)\r\n    if(res.data){\r\n      if(res.data.count){\r\n        setSeedList([...res.data.list])\r\n      }else{\r\n        message.info(t('暂无数据'))\r\n      }\r\n    }else{\r\n      message.info(t('出错了'))\r\n    }\r\n  }\r\n  const like = async (seed) =>{\r\n    if(!userId){\r\n      message.info(t('刷新后重试'))\r\n      return\r\n    }\r\n    let id = seed.id\r\n    const res = await axios.post('https://urarawin.com/api/sqlite/like',{id,userId})\r\n    if(res.data){\r\n      message.info(t('成功'))\r\n      seed.likes+=1\r\n    }\r\n    setSeedList([...seedList])\r\n  }\r\n  const dislike = async (seed)=>{\r\n    if(!userId){\r\n      message.info(t('刷新后重试'))\r\n      return\r\n    }else if(seed.dislikes&&seed.dislikes.indexOf(userId)!==-1 ){\r\n      return\r\n    }\r\n    let id = seed.id\r\n    const res = await axios.post('https://urarawin.com/api/sqlite/dislike',{id,userId})\r\n    if(res.data){\r\n      message.info(t('成功'))\r\n      seed.dislikes+=1\r\n    }\r\n    setSeedList([...seedList])\r\n  }\r\n  return(\r\n  <>\r\n    <SearchForm search={search}></SearchForm>\r\n    <Divider>{t('结果')}</Divider>\r\n    <Flex wrap='wrap'>\r\n      {seedList.map(seed=>\r\n      <Flex.Item  key={seed.gameId}\r\n        style={{width:'48%',flex:'0 0 auto',margin:0}}\r\n      >\r\n        <SeedCard data={seed}></SeedCard>\r\n      </Flex.Item>)}\r\n    </Flex>\r\n    {/* <Table columns={columns} dataSource={seedList} pagination={false} rowKey={'id'}/> */}\r\n  </>\r\n  )\r\n}\r\nexport default Seed\r\n","import React from 'react';\r\nimport { HashRouter as Router, Route, Link } from 'react-router-dom';\r\nimport CacheRoute, { CacheSwitch } from 'react-router-cache-route'\r\nimport { Image, Button, Popover } from 'antd'\r\nimport { Drawer, List, NavBar, Icon } from 'antd-mobile';\r\nimport 'antd-mobile/dist/antd-mobile.min.css';\r\n\r\nimport db from './db.js'\r\nimport dbL from './dbL.js'\r\nimport t from './components/t.js'\r\n\r\nimport Race from './pages/race.js'\r\nimport Player from './pages/player.js'\r\nimport Support from './pages/support.js'\r\nimport NurturingMO2 from './pages-mo/nurturing.js'\r\nimport Skill from './pages/skill.js'\r\nimport SeedMo from './pages-mo/seed.js'\r\n\r\nimport { SupportDetail } from './components/support-detail.js'\r\nimport { PlayerDetail } from './components/player-detail.js'\r\nimport { SkillDetail } from './components/skill-detail.js'\r\nimport { BuffList } from './components/buff.js'\r\nimport LanButton from './components/lan-button'\r\nconst cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\nclass App1 extends React.Component {\r\n  state = {\r\n    open: false,\r\n    title: 'urara win'\r\n  }\r\n\r\n  onOpenChange = () => {\r\n    this.setState({ open: !this.state.open })\r\n  }\r\n  onSelect = (label) => {\r\n    this.setState({ title: label });\r\n    this.onOpenChange()\r\n  }\r\n  reload = () => {\r\n    db.set('selected', {\r\n      supports: { 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\r\n      player: {},\r\n      races: []\r\n    }).write()\r\n    // db.set('myDecks',[]).write()\r\n  }\r\n  render() {\r\n    dbL.set('ua', 'mo').write();\r\n    const routers = [{ path: '/', label: '角色' },\r\n    { path: '/support', label: '支援卡' },\r\n    { path: '/skill', label: '技能' },\r\n    { path: '/race', label: '比赛' },\r\n    { path: '/nurturing2', label: '育成' },\r\n    { path: '/seed', label: '种马分享' }]\r\n    const linkList = (<List>\r\n      {routers.map(item =>\r\n        <Link to={item.path} key={item.path} onClick={() => this.onSelect(item.label)}>\r\n          <List.Item >{t(item.label)}</List.Item>\r\n        </Link>\r\n      )}\r\n\r\n      <List.Item style={{ marginTop: 200 }}>\r\n        <iframe title=\"GitHub\" src=\"https://ghbtns.com/github-btn.html?user=wrrwrr111&repo=pretty-derby&type=star&count=true&size=large&v=2\" frameBorder=\"0\" scrolling=\"0\" width=\"160px\" height=\"30px\"></iframe>\r\n      </List.Item>\r\n      <List.Item>\r\n        <Popover content={<><Image src={cdnServer + 'img/q.jpg'} width={300}></Image><p>{t('闲聊为主')}</p></>}>\r\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://qm.qq.com/cgi-bin/qm/qr?k=f2Q2MIqkkxiiYq-sfRYmI7E4v17-r3V2&jump_from=webapi\">\r\n            <Button placement=\"bottom\">{t('加入QQ群')}</Button>\r\n          </a>\r\n        </Popover>\r\n      </List.Item>\r\n      <List.Item>\r\n        <Popover content={<Image src={cdnServer + 'img/weapp.jpg'} width={200}></Image>}>\r\n          <Button placement=\"bottom\" style={{ display: 'flex' }}>\r\n            <Image src={cdnServer + 'reimu.gif'} preview={false} width={24}></Image>\r\n            <div>{t('微信小程序')}</div>\r\n          </Button>\r\n        </Popover>\r\n      </List.Item>\r\n      <List.Item>\r\n        <Button placement=\"bottom\" onClick={this.reload}>{t('初始化育成')}</Button>\r\n      </List.Item>\r\n      <List.Item>\r\n        <LanButton></LanButton>\r\n      </List.Item>\r\n    </List>)\r\n\r\n    return (\r\n      <Router>\r\n        <NavBar icon={<Icon type=\"ellipsis\" />} onLeftClick={this.onOpenChange}>{this.state.title}</NavBar>\r\n        <Drawer\r\n          className=\"my-drawer\"\r\n          style={{\r\n            minHeight: document.documentElement.clientHeight,\r\n            position: 'relative',\r\n            overflow: 'auto',\r\n            WebkitOverflowScrolling: 'touch'\r\n          }}\r\n          enableDragHandle={true}\r\n          contentStyle={{ color: '#A6A6A6', textAlign: 'center', paddingTop: 20 }}\r\n          // dragHandleStyle={{width:0}}\r\n          sidebar={linkList}\r\n          open={this.state.open}\r\n          onOpenChange={this.onOpenChange}\r\n        >\r\n          <CacheSwitch>\r\n            <CacheRoute exact path=\"/\" component={Player} />\r\n            <CacheRoute path=\"/support\" component={Support} />\r\n            <CacheRoute path=\"/skill\" component={Skill} />\r\n            <CacheRoute path=\"/nurturing2\" component={NurturingMO2} />\r\n            <CacheRoute path=\"/seed\" component={SeedMo} />\r\n            <CacheRoute path=\"/race\" component={Race} />\r\n            <CacheRoute path=\"/support-detail/:supportId\" component={SupportDetail} />\r\n            <CacheRoute path=\"/player-detail/:id/:nur\" component={PlayerDetail} />\r\n            <CacheRoute path=\"/skill-detail/:id\" component={SkillDetail} />\r\n            <CacheRoute path=\"/buff\" component={BuffList} />\r\n          </CacheSwitch>\r\n        </Drawer>\r\n      </Router>);\r\n  }\r\n}\r\nexport default App1\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import { UserAgentProvider, UserAgent, withUserAgent } from 'react-ua';\r\n\r\n// import './index.css'\r\n\r\n// import db from './db.js'\r\n// import EventList from './components/event-list.js'\r\n// import SkillList from './components/skill-list.js'\r\n\r\nimport AppPc from './app-pc'\r\nimport AppMo from './app-mo'\r\n// 取得ua\r\nlet ua = {}\r\nconst ie_upto10 = /MSIE \\d/.test(navigator.userAgent)\r\nconst ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\r\nconst ie_edge = /Edge\\/(\\d+)/.exec(navigator.userAgent)\r\nua.mac = /Mac/.test(navigator.platform)\r\nlet ie = ua.ie = !!(ie_upto10 || ie_11up || ie_edge)\r\nua.ie_version = ie_upto10 ? document.documentMode || 6 : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : null\r\nua.gecko = !ie && /gecko\\/(\\d+)/i.test(navigator.userAgent)\r\nua.gecko_version = ua.gecko && +(/Firefox\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1]\r\nlet chrome = !ie && /Chrome\\/(\\d+)/.exec(navigator.userAgent)\r\nua.chrome = !!chrome\r\nua.chrome_version = chrome && +chrome[1]\r\n// Is true for both iOS and iPadOS for convenience\r\nua.safari = !ie && /Apple Computer/.test(navigator.vendor)\r\nua.ios = ua.safari && (/Mobile\\/\\w+/.test(navigator.userAgent) || navigator.maxTouchPoints > 2)\r\nua.android = /Android \\d/.test(navigator.userAgent)\r\nua.webkit = \"webkitFontSmoothing\" in document.documentElement.style\r\nua.webkit_version = ua.webkit && +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1]\r\nconsole.log(ua)\r\n\r\n// const cdnServer = 'https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/'\r\n// https://purge.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/dbd.json\r\n// https://purge.jsdelivr.net/gh/wrrwrr111/pretty-derby/public/db.json\r\n\r\n// https://cdn.jsdelivr.net/gh/wrrwrr111/pretty-derby/raw/master/public/img/players/0uJ0iropRbr.png\r\n\r\nconst App = ()=>{\r\n  return(\r\n    <>\r\n    {ua.android||ua.ios?<AppMo></AppMo>:<AppPc></AppPc>}\r\n    </>\r\n  )\r\n}\r\n\r\nReactDOM.render((<App></App>),document.getElementById('root'),);\r\n"],"sourceRoot":""}